import{r as d,j as e,F as C,_ as D}from"./index-CECLz__I.js";import{C as h}from"./Collapsable-dMiDD3YN.js";import"./services-D8YECjA7.js";const R="https://user-friendly.dev/learning-api/demos/message-board/messages",F=()=>{const[r,n]=d.useState([]),[a,i]=d.useState("guest"),[s,f]=d.useState(""),p=d.useRef(null),t=d.useRef(null),N=()=>{fetch(R).then(l=>l.json()).then(l=>{n(l),f("")}).catch(l=>{console.log(`failed to get messages: ${l}`)})},m=l=>{const o=JSON.stringify(l);fetch(R,{method:"POST",headers:{"Content-Type":"application/json"},body:o}).then(u=>{if(!u.ok)throw Error(u.statusText);N()}).catch(u=>{console.log(`failed to post new message: ${u}`)})},c=l=>{const o={username:a,message:s};D.trim(o.username)==""||D.trim(o.message)==""||m(o)};d.useEffect(()=>{N()},[]),d.useEffect(()=>{t.current.scrollTop=t.current.scrollHeight,p.current.scrollIntoView(!1),p.current.focus()},[r]);const x=r.map((l,o)=>e.jsxDEV("div",{className:"p-6 m-4 border border-gray-300 rounded-md shadow-md",children:[e.jsxDEV("div",{className:"mb-2 text-lg font-medium",children:l.username},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/MessageBoard.jsx",lineNumber:82,columnNumber:4},void 0),e.jsxDEV("div",{children:l.message},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/MessageBoard.jsx",lineNumber:83,columnNumber:4},void 0)]},o,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/MessageBoard.jsx",lineNumber:78,columnNumber:3},void 0));return e.jsxDEV("div",{ref:p,className:"pb-6 flex flex-col items-center",children:[e.jsxDEV("div",{ref:t,className:"w-full max-w-xl flex flex-col max-h-[900px] overscroll-auto overflow-y-auto overflow-x-hidden",children:x},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/MessageBoard.jsx",lineNumber:89,columnNumber:4},void 0),e.jsxDEV(C,{onSubmit:c,className:"w-full max-w-xl px-2 pr-4 flex items-center",children:[e.jsxDEV("input",{name:"username",value:a,onChange:l=>i(l.target.value),className:"w-24 p-1 m-2 border border-gray-300 rounded-md"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/MessageBoard.jsx",lineNumber:99,columnNumber:5},void 0),e.jsxDEV("input",{name:"message",value:s,onChange:l=>f(l.target.value),placeholder:"enter message",autoComplete:"off",className:"flex-1 p-1 m-2 border border-gray-300 rounded-md"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/MessageBoard.jsx",lineNumber:105,columnNumber:5},void 0),e.jsxDEV("input",{type:"submit",value:"Send",className:"bg-blue-500 text-white px-2 py-1 rounded-md cursor-pointer"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/MessageBoard.jsx",lineNumber:113,columnNumber:5},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/MessageBoard.jsx",lineNumber:95,columnNumber:4},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/MessageBoard.jsx",lineNumber:88,columnNumber:3},void 0)},j="https://user-friendly.dev/learning-api/demos/deleting-furni/furnitures",E=()=>fetch(j),S=r=>fetch(`${j}/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:`User requested record (${r}) to be removed from data store.`})}),U=(r,n)=>fetch(`${j}/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),P=r=>{const{furniture:n,onDelete:a,onUpdate:i,onError:s}=r,[f,p]=d.useState(n.name),[t,N]=d.useState(n.description),[m,c]=d.useState(!1),x=()=>{p(n.name),N(n.description),c(!1)},l=()=>{if(f===n.name&&t===n.description){console.log(`Nothing to update for item ${n.id}.`),x();return}U(n.id,{name:f,description:t}).then(async o=>{if(!o.ok){const u=await o.json();throw new Error(u.message!==void 0?u.message:o.statusText)}c(!1),i()}).catch(o=>{x(),s(o)})};return e.jsxDEV("div",{className:"flex m-8 border rounded-lg shadow-md border-stone-300 overflow-clip",children:[e.jsxDEV("img",{src:n.image,className:"object-cover w-48 h-48 border-r border-stone-300"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:76,columnNumber:4},void 0),e.jsxDEV("div",{className:"flex flex-col w-full px-6 py-4 bg-white",children:m?e.jsxDEV(e.Fragment,{children:e.jsxDEV(C,{onSubmit:l,className:"flex flex-col",children:[e.jsxDEV("input",{className:"my-1 p-2 border border-neutral-200 rounded-lg shadow-inner",onChange:o=>p(o.target.value),value:f,name:"name",placeholder:"furniture name"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:85,columnNumber:7},void 0),e.jsxDEV("textarea",{className:"my-1 p-2 border border-neutral-200 rounded-lg shadow-inner",onChange:o=>N(o.target.value),name:"description",value:t},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:88,columnNumber:7},void 0),e.jsxDEV("div",{className:"self-end mt-5",children:[e.jsxDEV("button",{className:"mx-1 px-3 py-2 bg-teal-500 rounded-lg text-white text-md hover:bg-teal-600 active:bg-teal-700",type:"submit",children:"✔ Save"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:92,columnNumber:8},void 0),e.jsxDEV("button",{className:"mx-1 px-3 py-2 bg-rose-500 rounded-lg text-white text-md hover:bg-rose-600 active:bg-rose-700",type:"button",onClick:x,children:"🚫 Cancel"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:96,columnNumber:8},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:91,columnNumber:7},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:82,columnNumber:6},void 0)},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:81,columnNumber:16},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"mb-4 text-2xl text-stone-600 cursor-caret",onClick:o=>c(!0),children:f},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:104,columnNumber:6},void 0),e.jsxDEV("div",{className:"text-stone-500 cursor-caret",onClick:o=>c(!0),children:t},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:105,columnNumber:6},void 0),e.jsxDEV("div",{className:"mt-5 text-right",children:[e.jsxDEV("button",{className:"mr-2 px-3 py-2 bg-blue-500 rounded-lg text-white text-md hover:bg-blue-600 active:bg-blue-700",onClick:o=>c(!0),children:"✏ Edit"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:107,columnNumber:7},void 0),e.jsxDEV("button",{className:"px-3 py-2 bg-rose-500 rounded-lg text-white text-md hover:bg-rose-600 active:bg-rose-700",onClick:o=>a(o,n.id),children:"🗑️ Delete"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:114,columnNumber:7},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:106,columnNumber:6},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:103,columnNumber:11},void 0)},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:80,columnNumber:4},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:75,columnNumber:3},void 0)},V=({error:r,onClick:n})=>e.jsxDEV("div",{className:"py-2 px-4 text-xl text-white bg-red-600 rounded-md max-w-xl cursor-pointer",onClick:n,children:[r.toString()," ❌"]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:128,columnNumber:9},void 0),w=()=>{const[r,n]=d.useState([]),[a,i]=d.useState(null),s=()=>{E().then(t=>t.json()).then(t=>n(t))},f=(t,N)=>{S(N).then(async m=>{if(!m.ok){const c=await m.json();throw new Error(c.message!==void 0?c.message:m.statusText)}s()}).catch(m=>{console.log(`Failed to delete furniture (${N}): ${m}`),i(m)})};d.useEffect(()=>{s()},[]);const p=r.map((t,N)=>e.jsxDEV(P,{furniture:t,onDelete:f,onUpdate:()=>s(),onError:m=>{console.log(`A furniture item (${t.id}) failed to update: ${m}`),i(m)}},t.id,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:165,columnNumber:3},void 0));return e.jsxDEV("div",{className:"pt-4 flex flex-col items-center",children:[a?e.jsxDEV(V,{error:a,onClick:()=>i(null)},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:178,columnNumber:13},void 0):null,e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV("div",{className:"w-full max-w-2xl",children:p.length?p:"Store is out of furniture items!"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:180,columnNumber:4},void 0)},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:179,columnNumber:3},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Furniture.jsx",lineNumber:177,columnNumber:11},void 0)},g="https://user-friendly.dev/learning-api/demos/todo-list/todos",T=(r=[])=>{const n=Array.isArray(r)?r.join(","):r;let a=g;return n&&(a=`${g}/${n}`),fetch(a).then(i=>{if(!i.ok)throw new Error(i.statusText);return i.json()})},$=(r={})=>fetch(`${g}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(n=>{if(!n.ok)throw new Error(n.statusText);return n.json()}),y=(r,n)=>fetch(`${g}/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(a=>{if(!a.ok)throw new Error(a.statusText);return a.json()}),k=r=>fetch(`${g}/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(n=>{if(!n.ok)throw new Error(n.statusText);return n.json()}),M=({record:r,onCreate:n,onUpdate:a,onDelete:i})=>{const s=r.id,[f,p]=d.useState(r.complete),[t,N]=d.useState(r.text),[m,c]=d.useState(r.isNew===!0);r.isNew=!1;const x=u=>{p(u.target.checked);const v={complete:u.target.checked};y(s,v).then(b=>{a!==void 0&&a(s,v)}).catch(b=>console.log(`Failed to update record (${s}): ${b}`))},l=u=>{const v={text:t};y(s,v).then(b=>{a!==void 0&&a(s,v)}).catch(b=>console.log(`Failed to update record (${s}): ${b}`)),c(!1)},o=()=>{k(s).then(u=>{i!==void 0&&i(s)}).catch(u=>console.log(`Failed to delete record (${s}): ${u}`))};return e.jsxDEV("div",{className:"flex w-96 px-3 py-3 my-1 rounded-lg bg-white",children:[e.jsxDEV("input",{name:"completed",type:"checkbox",checked:f,onChange:x},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:122,columnNumber:3},void 0),m?e.jsxDEV(C,{className:"flex-1 flex justify-start items-center",onSubmit:l,children:[e.jsxDEV("input",{className:"flex-1 mx-2 px-2 py-1 rounded-lg border border-neutral-200 text-emerald-600",name:"text",type:"text",value:t,onChange:u=>N(u.target.value)},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:126,columnNumber:5},void 0),e.jsxDEV("button",{className:"bg-neutral-100 rounded-lg px-2 py-1",type:"submit",children:"✔ Save"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:128,columnNumber:5},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:125,columnNumber:4},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex-1 mx-2 px-2 py-1",children:t},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:132,columnNumber:5},void 0),e.jsxDEV("button",{className:"mr-1",onClick:u=>c(!0),type:"button",children:"✏"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:133,columnNumber:5},void 0),e.jsxDEV("button",{onClick:o,type:"button",children:"🗑"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:134,columnNumber:5},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:131,columnNumber:4},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:121,columnNumber:9},void 0)},B=()=>{const[r,n]=d.useState([]),a=()=>{$().then(s=>{s.isNew=!0,n([...r,s])}).catch(s=>console.log(`Failed to create record (${id}): ${s}`))},i=d.useCallback(()=>{T().then(s=>{n(s)}).catch(s=>console.log(`Failed to get all record ${ids.join(", ")}: ${s}`))},[]);return d.useEffect(()=>{i()},[i]),e.jsxDEV("div",{className:`
		flex flex-col justify-center items-center
		h-full bg-gradient-to-br from-rose-600 to-orange-200
		text-lg text-neutral-500
	`,children:e.jsxDEV("div",{className:"p-4 rounded-lg bg-neutral-100 flex flex-col",children:[r.map((s,f)=>e.jsxDEV(M,{record:s,onDelete:i},s.id,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:178,columnNumber:5},void 0)),e.jsxDEV("button",{className:"mt-2 py-2 font-bold rounded-lg hover:bg-white",type:"button",onClick:a,children:"➕ Add Todo"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:180,columnNumber:4},void 0)]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:176,columnNumber:3},void 0)},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/Components/CRUD/Todo.jsx",lineNumber:171,columnNumber:9},void 0)},A=({children:r})=>{let n=0;const a=[e.jsxDEV(h,{collapse:!0,title:"Message Board",children:e.jsxDEV(F,{},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/CRUD.jsx",lineNumber:19,columnNumber:4},void 0)},n++,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/CRUD.jsx",lineNumber:18,columnNumber:3},void 0),e.jsxDEV(h,{collapse:!0,title:"Furniture",children:e.jsxDEV(w,{},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/CRUD.jsx",lineNumber:22,columnNumber:4},void 0)},n++,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/CRUD.jsx",lineNumber:21,columnNumber:3},void 0),e.jsxDEV(h,{collapse:!1,title:"Todo List",children:e.jsxDEV(B,{},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/CRUD.jsx",lineNumber:25,columnNumber:4},void 0)},n++,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/CRUD.jsx",lineNumber:24,columnNumber:3},void 0)];return e.jsxDEV("div",{className:"h-full flex flex-col justify-start items-strech",children:[e.jsxDEV("h1",{className:"my-4 text-5xl self-center",children:"Create, Read, Update, Delete"},void 0,!1,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/CRUD.jsx",lineNumber:30,columnNumber:4},void 0),a]},void 0,!0,{fileName:"/apps/user-friendly.dev/src/Standalone/ReactFormula/Page/CRUD.jsx",lineNumber:29,columnNumber:3},void 0)};export{A as default};
