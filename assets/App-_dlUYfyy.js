import{r as o,j as t,L as R,u as he,A as Je,a as xe,b as Ue,R as Ke,c as _,O as Ze,d as Qe,e as et}from"./index-Ce864Uft.js";import{_ as x,t as L,f as Y}from"./services-Dx03o7LF.js";const tt="https://user-friendly.dev/learning-api/demos/capstone/",nt="browser-mock-api-key",Ae=(e=!1,n=null)=>({error:e,message:n}),F=e=>{const n=Ae();return x.isObject(e)?(e.error?(n.error=!0,n.message=e.error):e.message?n.message=e.message:n.message="Success",{...e,...n}):n},M=async(e,n,s={},r=null)=>{x.isObject(s)||(s={});const a={method:e,credentials:"same-origin",headers:{...s,Authorization:`Bearer ${nt}`,"Content-Type":"application/json",Accept:"application/json"}};r&&(a.body=JSON.stringify(r));let l=!1;try{l=await(await fetch(tt+n,a)).json()}catch(c){return console.error("failed to get resource",c),Ae(x.isObject(c)?c.toString():c)}return l},J="Capstone-Session",ge="capstone_session_token",st=e=>{try{return localStorage.setItem(ge,JSON.stringify(e)),!0}catch(n){console.error(n)}return!1},rt=()=>{try{return JSON.parse(localStorage.getItem(ge))}catch{_e()}return!1},_e=()=>localStorage.removeItem(ge),at=async e=>{try{const n=JSON.stringify(e),s=await M("GET","plants",{[J]:n});return F(s)}catch{console.error("Failed to get plants list.")}return!1},lt=async(e,n)=>{try{const s=JSON.stringify(e),r=await M("GET",`plant/${n}`,{[J]:s});return F(r)}catch{console.error(`Failed to get plant {${n}}.`)}return!1},ot=async e=>{try{const n=JSON.stringify(e),s=await M("GET","cart",{[J]:n});return F(s)}catch(n){console.error("Failed to get cart item list, error:",n)}return!1},ct=async(e,n)=>{const s="550e8400-e29b-41d4-a716-446655440000";try{const r=JSON.stringify(e),a=await M("POST",`cart/${s}`,{[J]:r},[n]);return F(a)}catch(r){console.error("Failed to get cart item list, error:",r)}return!1},it=async(e,n)=>{try{const s=JSON.stringify(e),r=await M("DELETE",`cart/${n}`,{[J]:s});return F(r)}catch(s){console.error(`Failed to remove item {${n}} from cart list, error:`,s)}return!1},dt=async(e,n,s)=>{const r=await M("POST","users",null,{username:e,password:n,password_confirm:s});return F(r)},ut=async(e,n)=>{const s=await M("POST","users/session",null,{username:e,password:n}),r=F(s);return x.isString(s.capstone_session_token)&&(r.payload=JSON.parse(s.capstone_session_token)),r},mt=async e=>{const n=await M("DELETE","users/session",null,e);return F(n)},E=o.createContext(!1),me=e=>o.useContext(E).isActive()===!e.not?e.children:null,ft=`
	p-2 rounded-lg bg-emerald-100 select-none cursor-pointer
	hover:bg-emerald-200 active:bg-emerald-300 text-emerald-700
`,ht="text-[2rem] p-2 select-none text-emerald-700",j=e=>{if(e.name===void 0)return t.jsx(t.Fragment,{});const n=e.name,s=e.className,r=x.omit(x.clone(e),["name","className"]);return t.jsx("span",{className:"material-symbols-outlined "+L(ft,s),...r,children:n})},O=e=>{if(e.name===void 0)return t.jsx(t.Fragment,{});const n=e.name,s=e.className,r=x.omit(x.clone(e),["name","className"]);return t.jsx("span",{className:"material-symbols-outlined "+L(ht,s),...r,children:n})},xt=`
	w-8 h-8 animate-spin rounded-full
	border-8 border-emerald-600 border-t-emerald-200
`,W=e=>{const n=e.className,s=x.omit(x.clone(e),["name","className","children"]);return t.jsx("div",{...s,className:L(xt,n),children:e.children})},gt=({item:e,onRemove:n})=>{const s=o.useContext(E),[r,a]=o.useState(),[l,c]=o.useState({error:!1}),{uuid:i,quantity:d,pot_color:f,name:m,price:y,image:g}=e.plant,v=Number(y*d).toFixed(2),p=b=>{r||(a(!0),c({error:!1}),(async()=>{const C=await it(s==null?void 0:s.data,e.id);C.error===!1?(console.log(`Removed item {${e.id}} from cart.`),n(e)):console.error("Failed to remove item from cart. Response:",C),c(C),a(!1)})())},u=t.jsx(W,{}),h=(l==null?void 0:l.error)!==!1&&t.jsx("div",{className:"mt-4 px-2 py-1 bg-rose-100 border border-rose-300 rounded-lg text-red-600 font-medium text-center",children:l.message});return t.jsxs("div",{className:"mb-10 last:mb-0 pb-10 border-b-2 flex text-neutral-500 font-bold",children:[t.jsx("div",{className:"basis-2/6 pb-6",children:t.jsx("img",{className:"w-48 rounded-lg",alt:m,src:g.src})}),t.jsxs("div",{className:"pl-8 flex-1 flex flex-col",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-playfair text-lg sm:text-3xl text-emerald-700 font-normal",children:m}),t.jsxs("span",{className:"ml-2",children:["$",v]})]}),t.jsxs("div",{className:"my-2",children:[t.jsx("span",{className:"w-16 inline-block text-neutral-400 font-normal",children:"qty: "}),d]}),t.jsxs("div",{children:[t.jsx("span",{className:"w-16 inline-block text-neutral-400 font-normal",children:"color: "}),f]}),t.jsx("div",{className:"pt-2 flex-1 flex justify-end items-end",children:h||t.jsx("button",{className:"flex items-center group hover:text-rose-700 active:translate-y-1",onClick:p,children:r?u:t.jsxs(t.Fragment,{children:["remove ",t.jsx(O,{className:"m-0 p-0 text-md text-neutral-400 group-hover:text-rose-700",name:"delete"})]})})})]})]})};var T=function(){return T=Object.assign||function(n){for(var s,r=1,a=arguments.length;r<a;r++){s=arguments[r];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])}return n},T.apply(this,arguments)};function Oe(e,n){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s}function vt(e,n,s){if(s||arguments.length===2)for(var r=0,a=n.length,l;r<a;r++)(l||!(r in n))&&(l||(l=Array.prototype.slice.call(n,0,r)),l[r]=n[r]);return e.concat(l||Array.prototype.slice.call(n))}var Q="right-scroll-bar-position",ee="width-before-scroll-bar",pt="with-scroll-bars-hidden",jt="--removed-body-scroll-bar-size";function re(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function yt(e,n){var s=o.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(r){var a=s.value;a!==r&&(s.value=r,s.callback(r,a))}}}})[0];return s.callback=n,s.facade}var bt=typeof window<"u"?o.useLayoutEffect:o.useEffect,pe=new WeakMap;function St(e,n){var s=yt(null,function(r){return e.forEach(function(a){return re(a,r)})});return bt(function(){var r=pe.get(s);if(r){var a=new Set(r),l=new Set(e),c=s.current;a.forEach(function(i){l.has(i)||re(i,null)}),l.forEach(function(i){a.has(i)||re(i,c)})}pe.set(s,e)},[e]),s}function wt(e){return e}function Nt(e,n){n===void 0&&(n=wt);var s=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(l){var c=n(l,r);return s.push(c),function(){s=s.filter(function(i){return i!==c})}},assignSyncMedium:function(l){for(r=!0;s.length;){var c=s;s=[],c.forEach(l)}s={push:function(i){return l(i)},filter:function(){return s}}},assignMedium:function(l){r=!0;var c=[];if(s.length){var i=s;s=[],i.forEach(l),c=s}var d=function(){var m=c;c=[],m.forEach(l)},f=function(){return Promise.resolve().then(d)};f(),s={push:function(m){c.push(m),f()},filter:function(m){return c=c.filter(m),s}}}};return a}function Ct(e){e===void 0&&(e={});var n=Nt(null);return n.options=T({async:!0,ssr:!1},e),n}var Fe=function(e){var n=e.sideCar,s=Oe(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=n.read();if(!r)throw new Error("Sidecar medium not found");return o.createElement(r,T({},s))};Fe.isSideCarExport=!0;function kt(e,n){return e.useMedium(n),Fe}var Me=Ct(),ae=function(){},se=o.forwardRef(function(e,n){var s=o.useRef(null),r=o.useState({onScrollCapture:ae,onWheelCapture:ae,onTouchMoveCapture:ae}),a=r[0],l=r[1],c=e.forwardProps,i=e.children,d=e.className,f=e.removeScrollBar,m=e.enabled,y=e.shards,g=e.sideCar,v=e.noIsolation,p=e.inert,u=e.allowPinchZoom,h=e.as,b=h===void 0?"div":h,C=e.gapMode,P=Oe(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=g,S=St([s,n]),B=T(T({},P),a);return o.createElement(o.Fragment,null,m&&o.createElement(A,{sideCar:Me,removeScrollBar:f,shards:y,noIsolation:v,inert:p,setCallbacks:l,allowPinchZoom:!!u,lockRef:s,gapMode:C}),c?o.cloneElement(o.Children.only(i),T(T({},B),{ref:S})):o.createElement(b,T({},B,{className:d,ref:S}),i))});se.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};se.classNames={fullWidth:ee,zeroRight:Q};var Et=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Rt(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=Et();return n&&e.setAttribute("nonce",n),e}function Pt(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function It(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var Tt=function(){var e=0,n=null;return{add:function(s){e==0&&(n=Rt())&&(Pt(n,s),It(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},Lt=function(){var e=Tt();return function(n,s){o.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},Be=function(){var e=Lt(),n=function(s){var r=s.styles,a=s.dynamic;return e(r,a),null};return n},At={left:0,top:0,right:0,gap:0},le=function(e){return parseInt(e||"",10)||0},_t=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],r=n[e==="padding"?"paddingTop":"marginTop"],a=n[e==="padding"?"paddingRight":"marginRight"];return[le(s),le(r),le(a)]},Ot=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return At;var n=_t(e),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,r-s+n[2]-n[0])}},Ft=Be(),H="data-scroll-locked",Mt=function(e,n,s,r){var a=e.left,l=e.top,c=e.right,i=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(pt,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(i,"px ").concat(r,`;
  }
  body[`).concat(H,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Q,` {
    right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(ee,` {
    margin-right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(Q," .").concat(Q,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ee," .").concat(ee,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(H,`] {
    `).concat(jt,": ").concat(i,`px;
  }
`)},je=function(){var e=parseInt(document.body.getAttribute(H)||"0",10);return isFinite(e)?e:0},Bt=function(){o.useEffect(function(){return document.body.setAttribute(H,(je()+1).toString()),function(){var e=je()-1;e<=0?document.body.removeAttribute(H):document.body.setAttribute(H,e.toString())}},[])},$t=function(e){var n=e.noRelative,s=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Bt();var l=o.useMemo(function(){return Ot(a)},[a]);return o.createElement(Ft,{styles:Mt(l,!n,a,s?"":"!important")})},fe=!1;if(typeof window<"u")try{var K=Object.defineProperty({},"passive",{get:function(){return fe=!0,!0}});window.addEventListener("test",K,K),window.removeEventListener("test",K,K)}catch{fe=!1}var $=fe?{passive:!1}:!1,Dt=function(e){return e.tagName==="TEXTAREA"},$e=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!Dt(e)&&s[n]==="visible")},Ht=function(e){return $e(e,"overflowY")},Yt=function(e){return $e(e,"overflowX")},ye=function(e,n){var s=n.ownerDocument,r=n;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=De(e,r);if(a){var l=He(e,r),c=l[1],i=l[2];if(c>i)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},Wt=function(e){var n=e.scrollTop,s=e.scrollHeight,r=e.clientHeight;return[n,s,r]},Gt=function(e){var n=e.scrollLeft,s=e.scrollWidth,r=e.clientWidth;return[n,s,r]},De=function(e,n){return e==="v"?Ht(n):Yt(n)},He=function(e,n){return e==="v"?Wt(n):Gt(n)},Vt=function(e,n){return e==="h"&&n==="rtl"?-1:1},qt=function(e,n,s,r,a){var l=Vt(e,window.getComputedStyle(n).direction),c=l*r,i=s.target,d=n.contains(i),f=!1,m=c>0,y=0,g=0;do{var v=He(e,i),p=v[0],u=v[1],h=v[2],b=u-h-l*p;(p||b)&&De(e,i)&&(y+=b,g+=p),i instanceof ShadowRoot?i=i.host:i=i.parentNode}while(!d&&i!==document.body||d&&(n.contains(i)||n===i));return(m&&(Math.abs(y)<1||!a)||!m&&(Math.abs(g)<1||!a))&&(f=!0),f},Z=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},be=function(e){return[e.deltaX,e.deltaY]},Se=function(e){return e&&"current"in e?e.current:e},Xt=function(e,n){return e[0]===n[0]&&e[1]===n[1]},zt=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Jt=0,D=[];function Ut(e){var n=o.useRef([]),s=o.useRef([0,0]),r=o.useRef(),a=o.useState(Jt++)[0],l=o.useState(Be)[0],c=o.useRef(e);o.useEffect(function(){c.current=e},[e]),o.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var u=vt([e.lockRef.current],(e.shards||[]).map(Se),!0).filter(Boolean);return u.forEach(function(h){return h.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),u.forEach(function(h){return h.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=o.useCallback(function(u,h){if("touches"in u&&u.touches.length===2||u.type==="wheel"&&u.ctrlKey)return!c.current.allowPinchZoom;var b=Z(u),C=s.current,P="deltaX"in u?u.deltaX:C[0]-b[0],A="deltaY"in u?u.deltaY:C[1]-b[1],S,B=u.target,q=Math.abs(P)>Math.abs(A)?"h":"v";if("touches"in u&&q==="h"&&B.type==="range")return!1;var U=ye(q,B);if(!U)return!0;if(U?S=q:(S=q==="v"?"h":"v",U=ye(q,B)),!U)return!1;if(!r.current&&"changedTouches"in u&&(P||A)&&(r.current=S),!S)return!0;var ve=r.current||S;return qt(ve,h,u,ve==="h"?P:A,!0)},[]),d=o.useCallback(function(u){var h=u;if(!(!D.length||D[D.length-1]!==l)){var b="deltaY"in h?be(h):Z(h),C=n.current.filter(function(S){return S.name===h.type&&(S.target===h.target||h.target===S.shadowParent)&&Xt(S.delta,b)})[0];if(C&&C.should){h.cancelable&&h.preventDefault();return}if(!C){var P=(c.current.shards||[]).map(Se).filter(Boolean).filter(function(S){return S.contains(h.target)}),A=P.length>0?i(h,P[0]):!c.current.noIsolation;A&&h.cancelable&&h.preventDefault()}}},[]),f=o.useCallback(function(u,h,b,C){var P={name:u,delta:h,target:b,should:C,shadowParent:Kt(b)};n.current.push(P),setTimeout(function(){n.current=n.current.filter(function(A){return A!==P})},1)},[]),m=o.useCallback(function(u){s.current=Z(u),r.current=void 0},[]),y=o.useCallback(function(u){f(u.type,be(u),u.target,i(u,e.lockRef.current))},[]),g=o.useCallback(function(u){f(u.type,Z(u),u.target,i(u,e.lockRef.current))},[]);o.useEffect(function(){return D.push(l),e.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:g}),document.addEventListener("wheel",d,$),document.addEventListener("touchmove",d,$),document.addEventListener("touchstart",m,$),function(){D=D.filter(function(u){return u!==l}),document.removeEventListener("wheel",d,$),document.removeEventListener("touchmove",d,$),document.removeEventListener("touchstart",m,$)}},[]);var v=e.removeScrollBar,p=e.inert;return o.createElement(o.Fragment,null,p?o.createElement(l,{styles:zt(a)}):null,v?o.createElement($t,{gapMode:e.gapMode}):null)}function Kt(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const Zt=kt(Me,Ut);var Ye=o.forwardRef(function(e,n){return o.createElement(se,T({},e,{ref:n,sideCar:Zt}))});Ye.classNames=se.classNames;const te=o.createContext(0),Qt="",w=e=>{const n=o.useContext(te),s=x.omit(x.clone(e),["className"]);return t.jsx(te.Provider,{value:n+1,children:t.jsx("div",{className:L(Qt,e.className),...s,children:e.children})})},we=["","ml-2","ml-6","ml-10","ml-14","ml-20"],We=()=>{const e=o.useContext(te);return e<7?we[e-1]:we[5]},en="my-2",k=e=>{const n=We();return t.jsx("p",{className:L(en,n,e.className),children:e.children})},tn=["text-6xl","text-5xl","text-4xl","text-3xl","text-2xl","text-xl"],nn="text-xl font-playfair",sn=e=>{switch(e.level){case 0:case 1:return t.jsx("h1",{...e,children:e.children});case 2:return t.jsx("h2",{...e,children:e.children});case 3:return t.jsx("h3",{...e,children:e.children});case 4:return t.jsx("h4",{...e,children:e.children});case 5:return t.jsx("h5",{...e,children:e.children});case 6:default:return t.jsx("h6",{...e,children:e.children})}return t.jsx("div",{...e,children:e.children})},N=e=>{const n=o.useContext(te),s=We();return t.jsx(sn,{level:n,className:L(nn,s,tn[n-1],e.className),children:e.children})},Ne="cart-modal",rn=`fixed top-0 right-0 w-full h-full bg-black/30 backdrop-blur-sm
	flex-col items-end overflow-auto
`,an=()=>{window.dispatchEvent(new Event("showCartModal"))},Ce=()=>{window.dispatchEvent(new Event("hideCartModal"))},ln=()=>{const e=o.useContext(E),[n,s]=o.useState(!1),r=()=>{s(!0)},a=()=>{s(!1)};o.useEffect(()=>(window.addEventListener("showCartModal",r),window.addEventListener("hideCartModal",a),()=>{window.removeEventListener("showCartModal",r),window.removeEventListener("hideCartModal",a)}),[n]);const l=t.jsx(j,{name:"close",className:"rounded-full"}),c=i=>{i.target.id===Ne&&Ce()};return t.jsx(me,{children:t.jsx(Ye,{enabled:n,children:t.jsxs(w,{id:Ne,className:Y(!n&&"hidden"||"flex",rn),onClick:c,children:[t.jsxs("div",{className:"w-full max-w-lg p-8 flex justify-between bg-emerald-800",children:[t.jsxs(N,{className:"flex-1 text-center text-2xl text-white",children:[x.get(e,"data.username"),"'s Cart"]}),t.jsx("button",{onClick:Ce,children:l})]}),n&&t.jsx(Ge,{})]})})})},X=1,on="underline text-neutral-400 hover:text-neutral-600 active:translate-y-0.5",cn=`p-2 self-stretch rounded-full
	flex justify-center items-center
	bg-emerald-700 hover:bg-emerald-800 active:bg-emerald-600 font-medium text-white text-lg`,dn=({list:e})=>{if(!x.isArray(e)||x.isEmpty(e))return t.jsx(t.Fragment,{});console.log(e);const n=e.length,s=e.reduce((r,a)=>r+a.plant.price,0);return t.jsxs("div",{className:"p-6 pt-2 text-neutral-400 flex flex-col items-end",children:[t.jsxs("div",{className:"my-4 self-stretch flex justify-between items-center",children:[t.jsxs("div",{children:[n," items"]}),t.jsxs("div",{className:"flex items-center",children:["subtotal:",t.jsxs("span",{className:"ml-2 text-neutral-500 text-lg font-bold",children:["$",s.toFixed(2)]})]})]}),t.jsxs("button",{className:cn,children:["Checkout ",t.jsx(O,{className:"text-white text-2xl",name:"shopping_cart_checkout"})]})]})},Ge=e=>{const{className:n,onRemove:s}=e,r=o.useContext(E),[a,l]=o.useState(null),[c,i]=o.useState({error:!1}),d=async()=>{if(!r.isActive()||a===X)return;i({error:!1}),l(X);const g=await ot(r==null?void 0:r.data);g.error===!1?l(g.data):(console.error("Failed to get cart item list. Response:",g),l(null)),i(g)};o.useEffect(()=>{d()},[r.data]);const f=g=>{const v=a.findIndex(p=>p.id===g.id);a[v]!==void 0&&(a.splice(v,1),l([...a]))},m=t.jsx("div",{className:"flex-1 flex justify-center items-center",children:t.jsx(W,{})});Y("rounded-full",a===X&&"animate-spinOnce");const y=(c==null?void 0:c.error)!==!1&&t.jsx("div",{className:"px-2 py-1 flex justify-center items-center bg-rose-100 border border-rose-300 rounded-lg text-red-600 font-medium",children:c.message});return t.jsxs("div",{className:L("w-full max-w-lg p-4 flex-1 flex flex-col bg-emerald-50",n),children:[y,a===X&&m,a!==X&&x.isEmpty(a)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{children:"Your cart is empty."}),t.jsxs("div",{children:["Visit the ",t.jsx(R,{className:on,to:"/plants",children:"Plant List"})," page for a great selection of plants ready to be Yours!"]})]}),t.jsx("div",{className:"p-6 pb-0 flex flex-col",children:x.isArray(a)&&a.map((g,v)=>t.jsx(gt,{item:g,onRemove:f},v))}),t.jsx(dn,{list:a})]})},un="py-2 px-1 font-lato font-medium hover:text-emerald-200 active:translate-y-0.5",ne=`
	bg-transparent text-white
	hover:bg-emerald-700 group-hover:bg-emerald-700 active:bg-emerald-600 group-active:bg-emerald-600
`,mn=`${ne} rounded-full animate-spin`,z=`${un} relative group flex justify-end items-center`,fn="hidden md:inline px-1 group-hover:underline",oe=`${ne}`,hn="text-white px-1 group-hover:underline",Ve=({isHam:e=!1})=>{const n=he(),s=o.useContext(E),[r,a]=o.useState(!1),l=e?hn:fn,c=async d=>{d.stopPropagation(),!r&&(a(!0),await s.signOut()&&n("/"),a(!1))},i=d=>{d.preventDefault(),an()};return t.jsxs(t.Fragment,{children:[t.jsxs(me,{children:[t.jsxs(R,{className:z,to:"/plants",children:[t.jsx("span",{className:l,children:"Plant List"}),t.jsx(j,{name:"potted_plant",className:oe})]}),t.jsxs(R,{className:z,children:[t.jsx("span",{className:l,children:x.get(s,"data.username")}),t.jsx(j,{name:"account_circle",className:oe})]}),t.jsxs(R,{className:z,to:"/cart",onClick:i,children:[t.jsx("span",{className:l,children:"Cart"}),t.jsx(j,{className:oe,name:"shopping_cart"})]}),t.jsxs(R,{className:z,onClick:c,children:[t.jsx("span",{className:l,children:"Sign Out"}),r&&t.jsx(j,{name:"progress_activity",className:mn})||t.jsx(j,{name:"logout",className:ne})]})]}),t.jsx(me,{not:!0,children:t.jsxs(R,{className:z,to:"/sign-in",children:[t.jsx("span",{className:l,children:"Sign In"}),t.jsx(j,{name:"login",className:ne})]})})]})},xn=()=>t.jsx("nav",{className:"navbar hidden sm:flex justify-center bg-emerald-800",children:t.jsxs("div",{className:"w-full max-w-5xl flex p-8 justify-end items-center text-white",children:[t.jsx("div",{className:"flex-1 flex",children:t.jsxs(R,{to:"/",className:"p-2 flex justify-start items-center",children:[t.jsx("img",{className:"w-10",title:"brand logo",src:"https://static-task-assets.react-formula.com/capstone_logo_light.png"}),t.jsx("span",{className:"ml-4 font-playfair text-2xl",children:"Rica's Plants"})]})}),t.jsx(Ve,{})]})}),gn="self-end bg-emerald-800 text-emerald-200 hover:text-emerald-300 hover:bg-emerald-600",vn="self-end bg-emerald-200 text-emerald-800 hover:text-emerald-300 hover:bg-emerald-600",pn=()=>{const e=o.useRef(),[n,s]=o.useState(!1),r=l=>{s(!1)};o.useEffect(()=>{const l=c=>{e.current&&!e.current.contains(c.target)&&r()};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const a=n?t.jsx(j,{name:"close",className:vn,onClick:l=>s(!1)}):t.jsx(j,{name:"menu",className:gn,onClick:l=>s(!0)});return t.jsxs("nav",{ref:e,className:Y("sm:hidden fixed top-2 right-2 w-40 p-2 flex flex-col justify-center",n&&"bg-emerald-800/95 rounded-lg shadow-lg"),children:[a,t.jsx("div",{className:"flex flex-col justify-center "+(n?null:"hidden"),onClick:r,children:t.jsx(Ve,{isHam:!0})})]})},ce=`
	my-1 py-2 px-3 bg-sky-200 rounded-lg
	text-center font-lato font-medium text-sky-800 hover:text-sky-300 hover:bg-sky-600
`,ke="self-end bg-sky-200 text-sky-800 hover:text-sky-300 hover:bg-sky-600",jn=()=>{const e=o.useRef(),[n,s]=o.useState(!1);o.useEffect(()=>{const a=l=>{e.current&&!e.current.contains(l.target)&&s(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const r=n?t.jsx(j,{name:"close",className:ke,onClick:a=>s(!1)}):t.jsx(j,{name:"menu",className:ke,onClick:a=>s(!0)});return t.jsxs("div",{ref:e,className:Y("fixed bottom-2 right-2 w-40 p-2 flex flex-col-reverse justify-center",n&&"bg-sky-100 rounded-lg shadow-lg"),children:[r,t.jsxs("div",{className:"flex flex-col justify-center "+(n?null:"hidden"),onClick:()=>s(!1),children:[t.jsx(Je,{className:ce,appid:"default",children:"Main App"}),t.jsx(R,{className:ce,to:"/style-guide",children:"Style Guide"}),t.jsx(R,{className:ce,to:"/",children:"Rica's Plants"})]})]})},G=()=>t.jsxs(t.Fragment,{children:[t.jsx(pn,{}),t.jsx(xn,{}),t.jsx(ln,{}),t.jsx(jn,{})]}),yn=()=>t.jsxs("div",{className:"h-screen bg-rose-50 flex flex-col",children:[t.jsx(G,{}),t.jsxs("div",{className:"pt-36 flex flex-col justify-center items-center",children:[t.jsxs("h1",{className:"my-3 px-3 text-4xl text-center",children:["Error 404: ",t.jsx("br",{className:"sm:hidden"})," Page Not Found"]}),t.jsx("p",{className:"py-3 px-8 max-w-xl",children:"The page you requested was not found. Please, contact the webadmin if this is a real issue. You might also be a snowflake if you contact the webadmin."})]})]}),bn=!1,V=e=>{const n=o.useContext(E),s=he(),r=e.path!==void 0?e.path:"/",a=e.delay!==void 0?e.delay:bn;return o.useEffect(()=>{if(n.isActive()===!e.not)if(a!==!1){const l=setTimeout(()=>s(r),a);return()=>clearTimeout(l)}else s(r)},[n.data]),e.children},Sn=()=>t.jsxs(V,{not:!0,path:"/sign-in",children:[t.jsx(G,{}),t.jsxs(w,{className:"p-8 mx-auto w-full max-w-5xl",children:[t.jsx(N,{className:"p-2 text-center",children:"Welcome to Rica's Plants"}),t.jsx(k,{children:"Your one-stop destination for all things green and growing! Our passion for plants shines through in our diverse selection of lush houseplants, exotic succulents, and vibrant garden favorites. We believe that plants bring more than just beauty to a space; they breathe life into your home, purify your air, and uplift your spirit. Whether you’re a seasoned green thumb or a first-time plant parent, we’re here to help you cultivate the perfect indoor oasis."}),t.jsx(k,{children:"At Rica's Plants, we understand that every plant has its own personality and needs. That's why we offer detailed care guides, personalized recommendations, and friendly support to ensure your plants thrive. From bright, sun-loving cacti to delicate, shade-loving ferns, we have options to suit every environment and lifestyle. Our commitment to quality means that each plant is carefully selected and nurtured until it's ready to become part of your space."}),t.jsx(k,{children:"Discover the joy of nurturing your own slice of nature with our specially curated collections. Our selection changes with the seasons, allowing you to find the freshest additions to your plant family throughout the year. Explore our rare finds section for unique specimens that will make your collection truly stand out. Join our community of plant lovers and embark on a journey of growth, inspiration, and endless greenery."})]})]}),I=`
	The quick brown fox jumps over the lazy dog, darting swiftly across the field with grace.
	As it leaps, its sleek fur glistens under the afternoon sun, casting fleeting shadows on the
	ground. The dog, unmoved by the fox's antics, lies lazily on the grass, its eyes half-closed
	in contentment. Around them, the sounds of nature fill the air: the chirping of birds,
	the rustling of leaves, and the distant hum of a breeze that stirs the tall grass. Time seems
	to slow in this peaceful moment, where the simple beauty of the scene speaks louder than words.
`,wn=()=>t.jsxs(t.Fragment,{children:[t.jsx(G,{}),t.jsxs("div",{className:"p-6 m-auto max-w-5xl ",children:[t.jsx("h1",{className:"my-4 text-5xl",children:"Heading"}),t.jsx("div",{className:"my-4 text-xl font-playfair",children:"Font Playfair Display test. This here is some random text to test the given font."}),t.jsx("div",{className:"my-4 text-xl font-lato",children:"Font Lato test. This here is some random text to test the given font."}),t.jsxs("div",{children:[t.jsx("h2",{className:"my-4 text-4xl",children:"Icons"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsx(j,{name:"menu"}),t.jsx(j,{name:"home",className:"text-4xl"}),t.jsx(j,{name:"account_circle"}),t.jsx(j,{name:"login"}),t.jsx(j,{name:"progress_activity",className:"rounded-full bg-transparent text-amber-700 hover:bg-amber-200 active:bg-amber-300 animate-spin"}),t.jsx(j,{name:"logout"}),t.jsx(j,{name:"close",className:"bg-violet-100 text-violet-700 hover:bg-violet-200 active:bg-violet-300"})]})]})]}),t.jsxs(w,{className:"my-20",children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I}),t.jsxs(w,{children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I}),t.jsxs(w,{children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I}),t.jsxs(w,{children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I}),t.jsxs(w,{children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I}),t.jsxs(w,{children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I}),t.jsxs(w,{children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I}),t.jsxs(w,{children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I})]})]})]})]})]})]})]})]}),t.jsxs(w,{className:"my-20",children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I}),t.jsxs(w,{children:[t.jsx(N,{children:"Sub heading"}),t.jsx(k,{children:I})]})]})]}),ie={text:"p-1 px-2 rounded-lg border border-slate-300 text-slate-600 bg-slate-50 focus:outline-emerald-600",button:"py-2 cursor-pointer rounded-lg text-white bg-green-800 hover:bg-green-700 active:bg-green-600",submit:"py-2 cursor-pointer rounded-lg text-white bg-green-800 hover:bg-green-700 active:bg-green-600"},de={text:"ml-3 mb-2 -mt-2 text-slate-400",button:"hidden"},Nn=({name:e,value:n,type:s="text",label:r,placeholder:a="",onChange:l,isButton:c=!1,onClick:i})=>{const d=o.useId(),f=ie[s]!==void 0?ie[s]:ie.text,m=de[s]!==void 0?de[s]:de.text;return t.jsxs("div",{className:"my-3 flex flex-col",children:[r&&t.jsx("label",{className:m,htmlFor:d,children:r}),c?t.jsx("button",{className:f,type:s,name:e,id:d,onClick:i,children:n}):t.jsx("input",{className:f,type:s,name:e,id:d,placeholder:a,value:n,onChange:l})]})},Cn=`
	m-4 pt-2 pb-4 px-8 bg-white border rounded-lg border-slate-300 font-lato font-medium
	min-w-80 flex flex-col 
`,kn=e=>{for(const n of e)if(n.name===void 0)throw"Form fields MUST have names."},En=e=>{const n={};for(const s of e)n[s.name]=s.value!==void 0?s.value:"";return n},Rn=(e,n,s)=>({...e,[n]:s}),qe=e=>{kn(e.fields);const n=o.useId(),[s,r]=o.useState(()=>En(e.fields)),a=c=>{c.preventDefault(),e.onSubmit(s,n,c)},l=x.assign(x.omit(e,["fields"]),{className:Cn,name:`form-${n}`,method:"POST",action:"",onSubmit:a});return t.jsxs("form",{...l,children:[e.fields.map((c,i)=>t.jsx(Nn,{onChange:d=>r(Rn(s,c.name,d.target.value)),...c,value:c.isButton?c.value:s[c.name]},i)),l.children]})},Xe=e=>{const n=e.children,s=e.status?e.status:{error:!1,message:null};return s.error!==!1&&!s.message&&(s.message="Something went wrong - try again later"),t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"relative hidden md:block",children:[t.jsx("img",{className:"h-screen object-cover",title:"plants on a rack",src:"https://static-task-assets.react-formula.com/capstone_sign_in_scene.png"}),t.jsx("div",{className:"absolute inset-0 w-full h-full bg-black/10"}),t.jsx("div",{className:"absolute inset-0 w-full h-full bg-emerald-800/40"})]}),t.jsxs("div",{className:"h-screen flex-1 bg-emerald-50 flex flex-col items-center justify-center",children:[t.jsxs("div",{className:"flex flex-col items-center mx-2 my-8",children:[t.jsx("img",{className:"w-16 mb-2 ",title:"brand logo",src:"https://static-task-assets.react-formula.com/capstone_logo_dark.png"}),t.jsx("div",{className:"font-playfair text-emerald-700 text-2xl",children:"Rica's Plants"})]}),s.message?t.jsx("div",{className:Y("animate-slideDown py-1 px-2 rounded-lg border",s.error?"bg-red-100 border-red-600 text-red-600 font-medium":"text-emerald-800 bg-emerald-100 border-emerald-600"),children:s.message}):null,n]})]})},Pn=1500,Ee=()=>({error:!1,message:null}),In=()=>{const e=o.useContext(E),n=xe(),[s,r]=o.useState(!1),[a,l]=o.useState(!1),[c,i]=o.useState(()=>x.has(n,"state.status.message")?n.state.status:Ee()),d=async(y,g,v)=>{if(a||e.isActive())return;console.log(`Sing up form {${g}} submitted.`),console.log("Values:",y),l(!0),i(Ee());const p=await ut(y.username,y.password);p.error===!1&&x.isObject(p.payload)&&(console.log("Login successful. Login details:",p.payload),e.signIn(p.payload),r(Pn)),i({error:p.error,message:p.message}),l(!1)},f=t.jsx("span",{className:"flex justify-center",children:t.jsxs("span",{className:"relative",children:["Sign In ",a?t.jsx(W,{className:"absolute top-0 -right-8 ml-2 w-6 h-6 border-4 border-transparent border-t-white"}):null]})}),m=[{name:"username",label:"username",value:x.has(n,"state.username")?n.state.username:void 0,type:"text"},{name:"password",label:"password",type:"password"},{name:"submit_button",value:f,type:"submit",isButton:!0}];return t.jsx(V,{path:"/plants",delay:s,children:t.jsxs(Xe,{status:c,children:[t.jsx(qe,{onSubmit:d,fields:m}),t.jsx(R,{to:"/sign-up",className:"text-sm text-green-700 underline hover:text-green-500",children:"Create an Account"})]})})},Re=()=>({error:!1,message:null}),Tn=()=>{const e=o.useContext(E),n=he(),[s,r]=o.useState(!1),[a,l]=o.useState(()=>Re()),c=async(f,m,y)=>{if(s||e.isActive())return;console.log(`Sing up form {${m}} submitted.`),console.log("Values:",f),r(!0),l(Re());const g=await dt(f.username,f.password,f.password_confirm);if(g.error===!1){const v=x.clone(g);v.message="You can login with Your username & password",g.message=t.jsxs(t.Fragment,{children:[g.message,t.jsx("br",{}),"Redirecting You to Sing In page..."]}),setTimeout(()=>n("/sign-in",{state:{status:v,username:f.username}}),1500)}l(g),r(!1)},d=[{label:"username",name:"username",type:"text"},{label:"password",name:"password",type:"password"},{label:"confirm password",name:"password_confirm",type:"password"},{name:"submit_button",value:t.jsx("span",{className:"flex justify-center",children:t.jsxs("span",{className:"relative",children:["Create an Account ",s?t.jsx(W,{className:"absolute top-0 -right-8 ml-2 w-6 h-6 border-4 border-transparent border-t-white"}):null]})}),type:"submit",isButton:!0}];return t.jsx(V,{path:"/plants",children:t.jsxs(Xe,{status:a,children:[t.jsx(qe,{onSubmit:c,fields:d}),t.jsx(R,{to:"/sign-in",className:"text-sm text-green-700 underline hover:text-green-500",children:"Log into Account"})]})})},Ln=()=>{const e=o.useContext(E);return t.jsxs(V,{not:!0,path:"/sign-in",children:[t.jsx(G,{}),t.jsx(w,{className:"py-24 flex justify-center",children:t.jsxs("div",{className:"w-full max-w-5xl",children:[t.jsxs(N,{className:"px-8 text-4xl",children:[x.get(e,"data.username"),"'s Cart"]}),t.jsx(Ge,{})]})})]})},ze={stone:"bg-stone-200",slate:"bg-slate-300",sky:"bg-sky-700",black:"bg-gray-600",white:"bg-gray-50",amber:"bg-amber-600"},An=e=>{const{images:n,selected:s,className:r,onClick:a,onMouseEnter:l,onMouseLeave:c,buttonStyle:i,labelStyle:d}=e;return t.jsx("div",{className:r,children:n.map((f,m)=>t.jsx("div",{className:"mx-1 flex flex-col items-center "+(s===m&&"group selected"),children:t.jsx("button",{className:L("w-5 h-5 rounded-full block",s===m&&"outline outline-1 outline-offset-2 outline-slate-400",ze[n[m].pot_color],i),onClick:()=>a(m),onMouseEnter:()=>l(m),onMouseLeave:()=>c(m)})},m))})},_n={stone:"text-stone-400",slate:"text-slate-500",sky:"text-sky-700",black:"text-gray-600",white:"text-gray-400",amber:"text-amber-600"},On=e=>{const[n,s]=o.useState(()=>x.random(0,e.data.images.length-1)),[r,a]=o.useState(n),{data:l}=e,c=Number(l.price).toFixed(2),i=l.images[r].pot_color;return t.jsxs("div",{className:"mx-5 my-8",children:[t.jsx(R,{to:`/plant/${l.uuid}`,state:{plantImageIdx:n},children:t.jsx("img",{className:"w-[280px] h-[320px] object-cover rounded-md",alt:l.description,src:l.images[r].src})}),t.jsxs("div",{className:"my-3 flex justify-between",children:[t.jsx("div",{className:"text-xl text-emerald-700",children:l.name}),t.jsxs("div",{className:"text-lg text-emerald-600",children:["$",c]})]}),t.jsxs("div",{className:"my-3 flex justify-between",children:[t.jsx("div",{className:_n[i]+" font-medium",children:i}),t.jsx(An,{className:"flex justify-end",images:l.images,selected:n,onClick:d=>{s(d),a(d)},onMouseEnter:d=>a(d),onMouseLeave:()=>a(n)})]})]})},ue=1,Fn=()=>{const e=o.useContext(E),[n,s]=o.useState(null),[r,a]=o.useState({error:!1}),l=async()=>{if(n===ue)return;a({error:!1}),s(ue);const d=await at(e==null?void 0:e.data);d.error===!1?s(d.data):(console.error("Failed to get plants list. Response:",d),s(null)),a(d)};o.useEffect(()=>{l()},[e.data]);const c=t.jsx(j,{name:"refresh",className:Y("rounded-full",n===ue&&"animate-spinOnce")}),i=t.jsx(W,{className:"mt-28"});return t.jsxs(V,{not:!0,path:"/sign-in",children:[t.jsx(G,{}),t.jsx(w,{className:"py-24 flex justify-center",children:t.jsxs("div",{className:"w-full max-w-5xl",children:[t.jsxs(N,{className:"px-8 text-4xl",children:["Plants In Stock ",t.jsx("button",{onClick:()=>l(),children:c})]}),t.jsx("div",{className:"flex flex-wrap justify-center",children:x.isArray(n)&&n.map((d,f)=>t.jsx(On,{data:d},d.id))||(r==null?void 0:r.error)===!1&&i}),(r==null?void 0:r.error)!==!1&&t.jsx("div",{className:"px-2 py-1 max-w-80 bg-rose-100 border border-rose-300 rounded-lg text-red-600 font-medium",children:r.message})]})})]})},Pe=e=>{const{plant:n,className:s}=e;return t.jsxs("div",{className:s,children:[t.jsxs(N,{className:"text-4xl flex justify-between",children:[t.jsx("span",{children:n.name}),t.jsxs("span",{className:"font-lato",children:["$",n.price]})]}),t.jsx("span",{className:"my-2 inline-block italic text-gray-400 text-lg",children:n.botanical_name})]})},Ie=e=>{const{images:n,selected:s,className:r,onClick:a,onMouseEnter:l,onMouseLeave:c}=e,i=`m-2 w-8 h-8 outline-2 md:w-12 md:h-12 md:outline-offset-4
		hover:outline hover:outline-1 group-[.selected]:hover:outline-2 hover:outline-slate-400`,d="text-lg md:text-xl text-slate-400 group-[.selected]:font-bold group-[.selected]:text-slate-600";return t.jsxs("div",{className:r,children:[t.jsxs("div",{className:"flex items-center text-2xl font-bold",children:[t.jsx(O,{className:"text-4xl",name:"format_paint"})," Pot Color"]}),t.jsx("div",{className:"flex flex-wrap justify-start",children:n.map((f,m)=>t.jsxs("div",{className:"mx-1 flex flex-col items-center "+(s===m&&"group selected"),children:[t.jsx("button",{className:L("w-5 h-5 rounded-full block",s===m&&"outline outline-1 outline-offset-2 outline-slate-400",ze[n[m].pot_color],i),onClick:()=>a(m),onMouseEnter:()=>l(m),onMouseLeave:()=>c(m)}),t.jsx("span",{className:d,children:n[m].pot_color})]},m))})]})},Mn=e=>t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"my-4 px-4 flex flex-col items-center border-r border-gray-300",children:[t.jsx(O,{name:"check_circle",className:"text-5xl"}),t.jsx("span",{className:"my-1 font-bold text-gray-700 text-center",children:"Guaranteed Healthy"}),t.jsx("span",{className:"text-gray-400 text-center",children:"Guaranteed to arrive healthy or your money back"})]}),t.jsxs("div",{className:"my-4 px-4 flex flex-col items-center",children:[t.jsx(O,{name:"delivery_truck_speed",className:"text-5xl"}),t.jsx("span",{className:"my-1 font-bold text-gray-700 text-center",children:"Free Shipping"}),t.jsx("span",{className:"text-gray-400 text-center",children:"Get free ground shipping on orders of $50 or more"})]})]}),Te=({quantity:e,inProgress:n=!1,className:s,onAddToCart:r,onIncrease:a,onDecrease:l})=>{const c="text-2xl rounded-full border-2 border-neutral-400 flex items-center",i="px-2 py-1 text-4xl font-bold text-neutral-500",d=`ml-2 p-2 w-full max-w-80 rounded-full
		flex justify-center items-center
		bg-emerald-700 hover:bg-emerald-800 active:bg-emerald-600 font-medium text-white text-lg`,f=t.jsx(O,{className:"text-white",name:"add_shopping_cart"}),m=t.jsx(O,{className:"text-white animate-spin",name:"progress_activity"});return t.jsxs("div",{className:L("my-4 flex items-center",s),children:[t.jsxs("div",{className:c,children:[t.jsx("button",{className:i,onClick:l,children:t.jsx(O,{className:"text-neutral-600",name:"remove"})}),t.jsx("span",{children:e}),t.jsx("button",{className:i,onClick:a,children:t.jsx(O,{className:"text-neutral-600",name:"add"})})]}),t.jsxs("button",{className:d,onClick:r,children:[n?m:f," Add to Cart"]})]})},Bn=e=>{const n=o.useContext(E),s=xe(),[r,a]=o.useState(()=>x.has(s,"state.plantImageIdx")?s.state.plantImageIdx:0),[l,c]=o.useState(r),[i,d]=o.useState(1),[f,m]=o.useState(!1),[y,g]=o.useState({error:!1}),{plant:v}=e,p=u=>{f||(m(!0),g({error:!1}),(async()=>{const h={plant:{uuid:v.uuid,quantity:i,pot_color:v.images[r].pot_color}},b=await ct(n==null?void 0:n.data,h);b.error===!1?console.log(`Added {${h.plant.quantity}} {${h.plant.pot_color}} plants to cart.`):console.error("Failed to get plants list. Response:",b),g(b),m(!1)})())};return t.jsxs("div",{className:"w-full max-w-5xl flex flex-col md:flex-row",children:[t.jsx(Pe,{className:"md:hidden",plant:v}),t.jsx(Ie,{className:"my-4 md:hidden",images:v.images,selected:r,onClick:u=>{a(u),c(u)},onMouseEnter:u=>c(u),onMouseLeave:()=>c(r)}),t.jsx(Te,{className:"md:hidden",quantity:i,inProgress:f,onAddToCart:p,onIncrease:u=>d(i+1),onDecrease:u=>d(i>1?i-1:1)}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsx("img",{className:"rounded-lg",title:v.botanical_name,src:v.images[l].src}),t.jsx(Mn,{})]}),t.jsxs("div",{className:"md:ml-8 flex-1 flex flex-col",children:[t.jsx(Pe,{className:"hidden md:block",plant:v}),t.jsx(k,{className:"py-2 px-0 text-gray-600",children:v.description}),t.jsx(Ie,{className:"my-4 hidden md:block",images:v.images,selected:r,onClick:u=>{a(u),c(u)},onMouseEnter:u=>c(u),onMouseLeave:()=>c(r)}),t.jsx(Te,{className:"hidden md:flex",quantity:i,inProgress:f,onAddToCart:p,onIncrease:u=>d(i+1),onDecrease:u=>d(i>1?i-1:1)})]})]})},Le=1,$n=()=>{const e=o.useContext(E),{uuid:n}=Ue(),[s,r]=o.useState(null),[a,l]=o.useState({error:!1}),c=async()=>{if(s===Le)return;l({error:!1}),r(Le);const d=await lt(e==null?void 0:e.data,n);d.error===!1?r(d.data):(console.error("Failed to get plants list. Response:",d),r(null)),l(d)};o.useEffect(()=>{c()},[e.data,n]);const i=t.jsx("div",{className:"flex justify-center",children:t.jsx(W,{className:"mt-28"})});return t.jsxs(V,{not:!0,path:"/sign-in",children:[t.jsx(G,{}),t.jsxs(w,{className:"py-24 px-8 flex justify-center",children:[(a==null?void 0:a.error)!==!1&&t.jsxs("div",{className:"px-2 py-1 m-auto text-center max-w-80 bg-rose-100 border border-rose-300 rounded-lg text-red-600 font-medium",children:[a.message,t.jsx("br",{}),t.jsx("button",{onClick:()=>c(),className:"px-2 py-1 border border-gray-600 rounded-md",children:"Retry?"})]}),x.isObject(s)&&t.jsx(Bn,{plant:s})||(a==null?void 0:a.error)===!1&&i]})]})},Dn=()=>t.jsx(t.Fragment,{children:t.jsx(Ze,{})}),Hn=()=>(xe(),o.useContext(E),t.jsx(Ke,{children:t.jsxs(_,{element:t.jsx(Dn,{}),children:[t.jsx(_,{path:"/",element:t.jsx(Sn,{})}),t.jsx(_,{path:"/sign-in",element:t.jsx(In,{})}),t.jsx(_,{path:"/sign-up",element:t.jsx(Tn,{})}),t.jsx(_,{path:"/style-guide",element:t.jsx(wn,{})}),t.jsx(_,{path:"/plants",element:t.jsx(Fn,{})}),t.jsx(_,{path:"/plant/:uuid",element:t.jsx($n,{})}),t.jsx(_,{path:"/cart",element:t.jsx(Ln,{})}),t.jsx(_,{path:"*",element:t.jsx(yn,{})})]})})),Yn="bg-emerald-50 font-lato text-emerald-600",Wn=Qe([{path:"*",element:t.jsx(Hn,{})}]),qn=()=>{const[e,n]=o.useState(()=>rt()),s={data:e,isActive:()=>x.isObject(e),signIn:r=>{n(r),st(r)},signOut:async()=>{let r=!1;return x.isObject(e)?(console.log(`Sign out user {${e.username}}.`),r=await mt(e)):console.log("No user was signed in."),n(null),_e(),r}};return t.jsx(E.Provider,{value:s,children:t.jsx("div",{className:`${Yn} min-h-screen`,children:t.jsx(et,{router:Wn})})})};export{qn as default};
