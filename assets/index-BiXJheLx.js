var xt=Object.defineProperty;var et=s=>{throw TypeError(s)};var bt=(s,t,r)=>t in s?xt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var x=(s,t,r)=>bt(s,typeof t!="symbol"?t+"":t,r),q=(s,t,r)=>t.has(s)||et("Cannot "+r);var e=(s,t,r)=>(q(s,t,"read from private field"),r?r.call(s):t.get(s)),n=(s,t,r)=>t.has(s)?et("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),i=(s,t,r,d)=>(q(s,t,"write to private field"),d?d.call(s,r):t.set(s,r),r),p=(s,t,r)=>(q(s,t,"access private method"),r);import{r as I,j as l,M as yt,L as wt}from"./index-DtZgx9cy.js";import{_ as vt}from"./services-C3bE939n.js";function Tt(s){s=Math.abs(parseInt(s));const t=Math.floor(s/36e5),r=Math.floor(s%36e5/6e4),d=Math.floor(s%6e4/1e3),v=s%1e3;return`${t}h ${r}m ${d}s ${v}ms`}var z,D;class st{constructor(){n(this,z,0);n(this,D,0)}step(t){return i(this,z,e(this,z)+t),i(this,D,e(this,D)+1),this}get(){return e(this,z)/e(this,D)}}z=new WeakMap,D=new WeakMap;const rt=2*Math.PI;var u,T,g,P,j,L,m,S,$,b,F,k,A,V,y,N,w,G,R,h,B,nt,ht,ot,H,lt;class Pt{constructor(t=null){n(this,h);n(this,u);n(this,T);n(this,g);n(this,P);n(this,j);n(this,L);n(this,m);n(this,S);n(this,$,!0);n(this,b);n(this,F);n(this,k);n(this,A);n(this,V);n(this,y);n(this,N);n(this,w);n(this,G);n(this,R);i(this,u,t),i(this,T,e(this,u).getContext("2d")),p(this,h,B).call(this)}start(){return console.log("Start render engine."),i(this,P,!0),i(this,b,new st),i(this,y,0),i(this,S,performance.now()),e(this,$)&&this.render(this.drawFps.bind(this)),requestAnimationFrame(this.frame.bind(this)),this}pause(){return console.log("Pause render engine."),i(this,P,!1),this}stop(){return console.log("Stop render engine."),i(this,j,!0),this}frame(t){i(this,m,t-e(this,S)),i(this,S,t),e(this,$)&&p(this,h,ot).call(this),p(this,h,ht).call(this),p(this,h,nt).call(this),e(this,P)&&e(this,j)===!1?requestAnimationFrame(this.frame.bind(this)):(e(this,$)&&p(this,h,lt).call(this),e(this,j)!==!1&&p(this,h,B).call(this))}getViewport(){return[e(this,u).width,e(this,u).height]}render(t){return typeof t=="object"&&typeof t.render!==void 0&&typeof t.render=="function"?e(this,g).push(t.render.bind(t)):typeof t=="function"&&e(this,g).push(t),this}drawExample(){return this.render((t,r,d)=>{t.beginPath(),t.moveTo(50,140),t.lineTo(150,60),t.lineTo(250,140),t.closePath(),t.stroke();const v=d.getViewport()[0]/2,M=d.getViewport()[1]/2;return t.beginPath(),t.arc(v,M,1,0,rt),t.stroke(),!0})}onResize(t,r){e(this,u).width=t,e(this,u).height=r}drawFps(t,r,d){return t.font="30px Tiny5",t.fillStyle="black",t.fillText(`FPS: ${e(this,R)}`,e(this,u).width-125,e(this,u).height-15),!0}}u=new WeakMap,T=new WeakMap,g=new WeakMap,P=new WeakMap,j=new WeakMap,L=new WeakMap,m=new WeakMap,S=new WeakMap,$=new WeakMap,b=new WeakMap,F=new WeakMap,k=new WeakMap,A=new WeakMap,V=new WeakMap,y=new WeakMap,N=new WeakMap,w=new WeakMap,G=new WeakMap,R=new WeakMap,h=new WeakSet,B=function(){i(this,g,[]),i(this,P,!1),i(this,j,!1),i(this,L,"rgb(255, 255, 255)"),i(this,m,0),i(this,S,0),i(this,b,null),i(this,k,0),i(this,A,0),i(this,F,0),i(this,V,6e4),i(this,y,0),i(this,N,0),i(this,w,0),i(this,G,5e3),i(this,R,0)},nt=function(){const t=e(this,g);i(this,g,[]);let r=null;for(;r=t.shift();)r(e(this,T),e(this,m),this)===!0&&e(this,g).push(r);return this},ht=function(){return e(this,T).fillStyle=e(this,L),e(this,T).fillRect(0,0,e(this,u).width,e(this,u).height),this},ot=function(){i(this,k,e(this,k)+e(this,m)),i(this,A,e(this,A)+1),e(this,b).step(e(this,m)),p(this,h,H).call(this),e(this,y)>e(this,V)?(i(this,F,parseInt(e(this,b).get())),i(this,y,0),i(this,b,new st),console.log(`Average delta: ${e(this,F)} ms`)):i(this,y,e(this,y)+e(this,m))},H=function(){e(this,w)>e(this,G)?(i(this,R,parseInt(e(this,N)/e(this,w)*1e3)),i(this,N,0),i(this,w,0),console.log("FPS:",e(this,R))):(i(this,N,e(this,N)+1),i(this,w,e(this,w)+e(this,m)))},lt=function(){p(this,h,H).call(this),console.log(`Average delta: ${e(this,F)} ms`),console.log(`Total, frames: ${e(this,A)}, render time: ${Tt(e(this,k))}`)};function jt(s,t){s.beginPath(),s.arc(t.x,t.y,1,0,rt),s.stroke()}function it(s,t){s.beginPath(),s.moveTo(0,0),s.lineTo(t.x,t.y),s.closePath(),s.stroke()}const St="Graphics";let a=null;const Mt=()=>{const[s,t]=I.useState(!0),[r,d]=I.useState(!0),v=I.useRef(null),M=I.useRef(null);I.useLayoutEffect(()=>{a=new Pt(M.current),a.start(),a.drawExample();const W=(o,c=performance.now(),E=0)=>{const Z=new yt(c),tt=[];for(let _=0;_<o+E;_++)_>=E?tt.push(Z.rnd()):Z.rnd();return tt},J=2**32,X=128,ut=W(X,Math.random()*J),ct=W(X,Math.random()*J),[dt,ft]=[20,250],[mt,pt]=[600,150];let f=null,K=[];for(let o=0;o<X;o++)f={x:ut[o],y:ct[o]},f.x=mt*f.x,f.y=pt*f.y,f.x=dt+f.x,f.y=ft+f.y,K.push(f);a.render((o,c)=>{for(const E of K)jt(o,E);return!0});const Q={x:128,y:128},Y=vt.clone(Q);Y.y=Y.y*2,a.render((o,c)=>(it(o,Q),it(o,Y),!0));class gt{constructor(){x(this,"timeout",0);x(this,"delay",3e3);x(this,"text","Hello, 2D Canvas!");x(this,"x",0);x(this,"y",0);x(this,"z",0);x(this,"w",0);this.timeout=this.delay}advance(c){this.timeout>=this.delay?(this.timeout=0,this.x=Math.random()*(M.current.width-150),this.y=Math.random()*(M.current.height-100)):this.timeout+=c}render(c,E){return this.advance(E),c.font="40px Tiny5",c.fillStyle="black",c.fillText(this.text,this.x,this.y),!0}}a.render(new gt);const U=new ResizeObserver(o=>{const c=o[0].contentRect;a&&a.onResize(c.width,c.height)});return U.observe(v.current),()=>{a&&(a.stop(),a=null),U.unobserve(v.current)}},[]);const C="my-2 mx-1 px-2 py-1 bg-blue-500 text-xl text-white rounded-md hover:bg-blue-600 active:bg-blue-700 disabled:bg-neutral-400",at=r?"fixed inset-0 w-screen h-screen":"flex-1 self-stretch border-2 border-gray-700";let O=l.jsxs(l.Fragment,{children:[l.jsx(wt,{className:C,to:"/home",children:"Back Home"}),r?l.jsx("button",{className:C,onClick:()=>d(!1),children:"Exit Fullscreen ⬇"}):l.jsx("button",{className:C,onClick:()=>d(!0),children:"Fullscreen ↕"}),s?l.jsx("button",{className:C,onClick:()=>{t(!s),a.pause()},children:"Pause ⏸"}):l.jsx("button",{className:C,onClick:()=>{t(!s),a.start()},children:"Play ▶"}),l.jsx("button",{className:C,onClick:()=>{a.stop()},children:"Stop ⏹"})]});return l.jsxs("div",{className:"h-full flex flex-col items-center",children:[l.jsx("h2",{className:"m-4 text-4xl text-center",children:St}),l.jsx("div",{className:"mb-4 text-3xl",children:O}),l.jsxs("div",{ref:v,className:at,children:[l.jsx("canvas",{ref:M,className:r?" absolute inset-0":null}),r?l.jsx("div",{className:"absolute top-1 right-1",children:O}):null]})]})};export{Mt as default};
