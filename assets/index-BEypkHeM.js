var ae=Object.defineProperty;var J=t=>{throw TypeError(t)};var he=(t,e,n)=>e in t?ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var f=(t,e,n)=>he(t,typeof e!="symbol"?e+"":e,n),G=(t,e,n)=>e.has(t)||J("Cannot "+n);var s=(t,e,n)=>(G(t,e,"read from private field"),n?n.call(t):e.get(t)),i=(t,e,n)=>e.has(t)?J("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),r=(t,e,n,c)=>(G(t,e,"write to private field"),c?c.call(t,n):e.set(t,n),n),I=(t,e,n)=>(G(t,e,"access private method"),n);import{r as N,j as l,M as ue,L as ce}from"./index-DiHVhwap.js";import{_ as de}from"./services-7kcaoxLK.js";const U=2*Math.PI;var u,y,p,j,k,g,S,E,M,z,b,m,P,R,Z,A;class fe{constructor(e=null){i(this,R);i(this,u,null);i(this,y,null);i(this,p,[]);i(this,j,!1);i(this,k,"rgb(255, 255, 255)");i(this,g,null);i(this,S,0);i(this,E,0);i(this,M,!0);i(this,z,3e4);i(this,b,0);i(this,m,0);i(this,P,0);r(this,u,e),r(this,y,s(this,u).getContext("2d"))}start(){return console.log("Start render engine."),r(this,j,!0),r(this,g,new Q),r(this,b,0),r(this,P,performance.now()),requestAnimationFrame(this.frame.bind(this)),this}pause(){return console.log("Pause render engine."),r(this,j,!1),this}frame(e){r(this,m,e-s(this,P)),r(this,P,e),s(this,M)&&(r(this,S,s(this,S)+s(this,m)),r(this,E,s(this,E)+1),s(this,g).step(s(this,m)),s(this,b)>s(this,z)?(r(this,b,0),console.log("delta: ",s(this,g).get()),r(this,g,new Q)):r(this,b,s(this,b)+s(this,m))),I(this,R,A).call(this),I(this,R,Z).call(this),s(this,j)?requestAnimationFrame(this.frame.bind(this)):s(this,M)&&(console.log("average delta: ",s(this,g).get()),console.log(`total frames: ${s(this,E)}, total time: ${s(this,S)}`))}getViewport(){return[s(this,u).width,s(this,u).height]}render(e){return typeof e=="object"&&typeof e.render!==void 0&&typeof e.render=="function"?s(this,p).push(e.render.bind(e)):typeof e=="function"&&s(this,p).push(e),this}drawExample(){return this.render((e,n,c)=>{e.beginPath(),e.moveTo(50,140),e.lineTo(150,60),e.lineTo(250,140),e.closePath(),e.stroke();const x=c.getViewport()[0]/2,w=c.getViewport()[1]/2;return e.beginPath(),e.arc(x,w,1,0,U),e.stroke(),!0})}onResize(e,n){s(this,u).width=e,s(this,u).height=n}}u=new WeakMap,y=new WeakMap,p=new WeakMap,j=new WeakMap,k=new WeakMap,g=new WeakMap,S=new WeakMap,E=new WeakMap,M=new WeakMap,z=new WeakMap,b=new WeakMap,m=new WeakMap,P=new WeakMap,R=new WeakSet,Z=function(){const e=s(this,p);r(this,p,[]);let n=null;for(;n=e.shift();)n(s(this,y),s(this,m),this)===!0&&s(this,p).push(n);return this},A=function(){return s(this,y).fillStyle=s(this,k),s(this,y).fillRect(0,0,s(this,u).width,s(this,u).height),this};function pe(t,e){t.beginPath(),t.arc(e.x,e.y,1,0,U),t.stroke()}function K(t,e){t.beginPath(),t.moveTo(0,0),t.lineTo(e.x,e.y),t.closePath(),t.stroke()}var C,F;class Q{constructor(){i(this,C,0);i(this,F,0)}step(e){return r(this,C,s(this,C)+e),r(this,F,s(this,F)+1),this}get(){return s(this,C)/s(this,F)}}C=new WeakMap,F=new WeakMap;const ge=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],B=(t,e)=>typeof e=="number"?(t.forEach((n,c,x)=>x[c]=n*e),t):[t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15]],me=t=>{console.log("|",t[0],t[1],t[2],t[3],"|"),console.log("|",t[4],t[5],t[6],t[7],"|"),console.log("|",t[8],t[9],t[10],t[11],"|"),console.log("|",t[12],t[13],t[14],t[15],"|")},xe=B(ge(),[2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,1]),ye=B(xe,[1,0,0,-2,0,1,0,2,0,0,1,3.5,0,0,0,1]);console.log(me(ye));const be="Graphics";let a=null;const Pe=()=>{const[t,e]=N.useState(!0),[n,c]=N.useState(!0),x=N.useRef(null),w=N.useRef(null);N.useLayoutEffect(()=>{a=new fe(w.current),a.start(),a.drawExample();const Y=(o,h=performance.now(),v=0)=>{const W=new ue(h),$=[];for(let V=0;V<o+v;V++)V>=v?$.push(W.rnd()):W.rnd();return $},_=2**32,D=128,te=Y(D,Math.random()*_),se=Y(D,Math.random()*_),[ne,re]=[20,250],[ie,oe]=[600,150];let d=null,q=[];for(let o=0;o<D;o++)d={x:te[o],y:se[o]},d.x=ie*d.x,d.y=oe*d.y,d.x=ne+d.x,d.y=re+d.y,q.push(d);a.render((o,h)=>{for(const v of q)pe(o,v);return!0});const H={x:128,y:128},L=de.clone(H);L.y=L.y*2,a.render((o,h)=>(K(o,H),K(o,L),!0));class le{constructor(){f(this,"timeout",0);f(this,"delay",3e3);f(this,"text","Hello, 2D Canvas!");f(this,"x",0);f(this,"y",0);f(this,"z",0);f(this,"w",0);this.timeout=this.delay}advance(h){this.timeout>=this.delay?(this.timeout=0,this.x=Math.random()*(w.current.width-150),this.y=Math.random()*(w.current.height-100)):this.timeout+=h}render(h,v){return this.advance(v),h.font="40px Tiny5",h.fillStyle="black",h.fillText(this.text,this.x,this.y),!0}}a.render(new le);const O=new ResizeObserver(o=>{const h=o[0].contentRect;a&&a.onResize(h.width,h.height)});return O.observe(x.current),()=>{a&&(a.pause(),a=null),O.unobserve(x.current)}},[]);const T="my-2 mx-1 px-2 py-1 bg-blue-500 text-xl text-white rounded-md hover:bg-blue-600 active:bg-blue-700 disabled:bg-neutral-400",ee=n?"fixed inset-0 w-screen h-screen":"flex-1 self-stretch border-2 border-gray-700";let X=l.jsxs(l.Fragment,{children:[l.jsx(ce,{className:T,to:"/home",children:"Back Home"}),n?l.jsx("button",{className:T,onClick:()=>c(!1),children:"Exit Fullscreen ⬇"}):l.jsx("button",{className:T,onClick:()=>c(!0),children:"Fullscreen ↕"}),t?l.jsx("button",{className:T,onClick:()=>{e(!t),a.pause()},children:"Pause ⏸"}):l.jsx("button",{className:T,onClick:()=>{e(!t),a.start()},children:"Play ▶"})]});return l.jsxs("div",{className:"h-full flex flex-col items-center",children:[l.jsx("h2",{className:"m-4 text-4xl text-center",children:be}),l.jsx("div",{className:"mb-4 text-3xl",children:X}),l.jsxs("div",{ref:x,className:ee,children:[l.jsx("canvas",{ref:w,className:n?" absolute inset-0":null}),n?l.jsx("div",{className:"absolute top-1 right-1",children:X}):null]})]})};export{Pe as default};
