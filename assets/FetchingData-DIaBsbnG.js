import{r as l,j as e,S as b,F as v,C as f}from"./index-ChF-Ax55.js";import{_ as m}from"./services-CjkLjJI_.js";const S="https://api.react-formula.com/learning-api/demos/using-fetch/recipes",k=({recipe:s})=>e.jsxs("div",{className:"m-8",children:[e.jsx("div",{className:"py-4 text-3xl text-center text-yellow-100 bg-yellow-500 rounded-t-lg",children:s.name}),e.jsx("img",{className:"object-cover w-[400px] h-[320px] rounded-b-lg",src:s.image_url})]}),E=s=>{const[t,r]=l.useState(null),o=n=>{fetch(S).then(a=>a.json()).then(a=>r(a))};return e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[t!==null?e.jsx(k,{recipe:t}):e.jsx("span",{className:"text-lg p-4 font-bold",children:"No recipe loaded"}),e.jsx("button",{className:"rounded-full px-4 py-2 bg-blue-400 text-white",onClick:o,children:"Get Random Recipe"})]})},P="https://api.react-formula.com/learning-api/demos/random-joke/jokes",C=s=>{const[t,r]=l.useState(null),[o,n]=l.useState(!1),a=c=>{console.log("get new joke"),fetch(P).then(x=>x.json()).then(x=>{r(x),n(!1)})},d=c=>{t&&(console.log("reveal punch line"),n(!0))};return e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx("div",{className:"text-3xl text-gray-600 mt-4",children:t?t.question:"[opener goes here]"}),e.jsx("div",{className:"text-xl text-blue-500 my-4",children:o?t.answer:"[punch line goes here]"}),e.jsx("button",{className:"rounded-lg px-4 py-2 bg-blue-500 text-white text-xl mb-4",onClick:d,children:"Show Answer"}),e.jsx("button",{className:"rounded-lg px-4 py-2 bg-violet-600 text-white text-xl",onClick:a,children:"New Joke"})]})},R="https://api.react-formula.com/learning-api/demos/teammates-project/profiles",T=({profile:s})=>e.jsxs("div",{className:"flex rounded-xl overflow-clip my-4 shadow-md",children:[e.jsx("div",{className:"bg-teal-500 p-3",children:e.jsx("img",{className:"w-32 rounded-full border-4 border-green-700",src:s.image})}),e.jsxs("div",{className:"p-4 flex-1 flex flex-col justify-center items-start bg-white",children:[e.jsx("div",{className:"text-2xl text-gray-500",children:s.name}),e.jsx("div",{className:"text-lg font-bold text-teal-400",children:s.title}),e.jsx("div",{className:"text-gray-500",children:s.email})]})]}),D=()=>e.jsx("div",{className:"m-auto w-8 h-8 rounded-full animate-spin border-4 border-teal-500 border-t-transparent bg-gray-200"}),$=s=>{const[t,r]=l.useState(!1),[o,n]=l.useState([]),a=()=>{fetch(R).then(c=>c.json()).then(c=>setTimeout(()=>{n(c),r(!0)},1500))};l.useEffect(()=>{a()},[]);const d=t?o.map((c,x)=>e.jsx(T,{profile:c},x)):e.jsx(D,{});return e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"w-full max-w-lg pt-4",children:d})})},F="https://api.react-formula.com/learning-api/demos/stocks-project/stocks",U=({name:s,current_price:t,previous_price:r,symbol:o})=>{const n=(t-r)/r*100,a=t/100;return e.jsxs("div",{className:`
		m-4 p-4 border border-neutral-400 bg-white text-neutral-400
		flex justify-between
	`,children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:s}),e.jsx("span",{className:"text-2xl text-blue-400 font-bold",children:o})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:`
				px-2 py-1 rounded-full text-xs
				${n>0?"bg-green-200 text-green-600":null} ${n<0?"bg-red-200 text-red-600":null} ${n==0?"bg-neutral-200 text-neutral-600":null}
			`,children:n!==0?`${n.toFixed(2)}%`:"-"}),e.jsxs("span",{className:"text-2xl text-black",children:["$",a.toFixed(2)]})]})]})},L=()=>{const[s,t]=l.useState(!0),[r,o]=l.useState([]),n=async()=>{const a=await fetch(F);o(await a.json()),t(!1)};return l.useEffect(()=>{console.log("add some artificial delay to showcase the spinner ;)");const a=setTimeout(()=>{n()},1500);return()=>{clearTimeout(a)}},[]),e.jsx("div",{className:"flex flex-col items-center min-w-80",children:e.jsx("div",{className:"w-full max-w-md",children:s?e.jsx(b,{bg:"bg-white",borderColor:"border-blue-400",extra:"m-auto mt-4 text-center text-blue-400",children:"^"}):r.map((a,d)=>l.createElement(U,{...a,key:d}))})})},_=1e3,O="https://api.weather.gov/points",N=[{id:"NY1",name:"Manhattan, NY",point:[40.7814,-73.9693]},{id:"CA1",name:"San Francisco, CA",point:[37.7922546,-122.393647]}];async function A(s){m.isArray(s)&&(s=s.join(","));try{const t=await fetch(`${O}/${s}`);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const r=await t.json();if(!m.has(r,"properties.forecast"))throw new Error("response error, forecast endpoint not found");return r.properties.forecast}catch(t){return console.error(`failed to get forecast endpoint: ${t}`),!1}}async function H(s){let t=null;try{const n=await fetch(s);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);if(t=await n.json(),!m.has(t,"properties.periods")||!m.isArray(t.properties.periods))throw new Error("response error, periods not found")}catch(n){return console.error(`failed to get daily forcast: ${n}`),!1}let r=t.properties.periods;r[0].isDaytime||(r=[m.clone(r[0]),...r.slice(0,-1)],r[0].isDaytime=!0);let o=1e3;return m.reduce(r,(n,a,d)=>(a.isDaytime?n.push({key:o++,name:a.name,icon:a.icon,tempDay:a.temperature,tempNight:null,tempUnit:a.temperatureUnit,rainProb:a.probabilityOfPrecipitation.value}):n[n.length-1].tempNight=a.temperature,n),[])}const I=({name:s,icon:t,tempDay:r,tempNight:o,tempUnit:n,rainProb:a})=>e.jsxs("div",{className:`
		m-2 p-4 w-44 rounded-lg border border-neutral-300 bg-white
		flex flex-col items-center
	`,children:[e.jsx("span",{className:"break-all hyphens-auto text-center text-xl text-neutral-600",children:s}),e.jsx("img",{className:"my-3 w-20 rounded-full",src:t}),e.jsxs("div",{className:"w-24 flex justify-between",children:[e.jsxs("span",{className:"",children:[r,"°",n]}),e.jsxs("span",{className:"text-neutral-400",children:[o,"°",n]})]})]}),J=()=>{const[s,t]=l.useState(!0),[r,o]=l.useState("CA1"),[n,a]=l.useState([]),[d,c]=l.useState(null),x=async i=>{const h=await A(i);if(!h){c(!0);return}const g=await H(h);if(!g){c(!0);return}a(g),t(!1),c(!1)},j=()=>{const i=N.find(h=>h.id===r);x(i.point)};l.useEffect(()=>{if(!s)return;const i=setTimeout(j,_);return()=>{clearTimeout(i)}},[r,s]);const u=i=>{o(i.target.value),t(!0)},y=i=>{t(!0)};let p=null;return d?p=e.jsx(e.Fragment,{children:"Could not get forecast. Please, try again later."}):s?p=e.jsx(b,{bg:"bg-white",borderColor:"border-blue-400",extra:"m-auto mt-4 text-center text-blue-400",children:"^"}):p=n.map((i,h)=>l.createElement(I,{...i,key:i.key})),e.jsxs("div",{className:"flex flex-col items-center min-w-80",children:[e.jsxs("div",{className:"py-8 text-xl",children:[e.jsx("select",{className:"mr-2 p-1 border border-neutral-300 rounded-md outline-neutral-600",value:r,onChange:u,children:N.map((i,h)=>e.jsx("option",{value:i.id,children:i.name},h))}),e.jsx("button",{onClick:y,children:"🔃"})]}),e.jsx("div",{className:"w-full max-w-3xl flex flex-wrap justify-center",children:p}),e.jsxs("div",{className:"my-4 text-sm text-neutral-400",children:["Forecast provided by"," ",e.jsx("a",{href:"https://www.weather.gov/",target:"_blank",children:e.jsx("img",{className:"inline rounded-full w-12",src:"/nws-logo.png"})})]})]})},w=-1,M="https://api.react-formula.com/learning-api/demos/states-project/states",W=({capital:s,description:t,image:r,name:o,nickname:n,population:a})=>e.jsxs("div",{className:"max-w-2xl m-4",children:[e.jsxs("div",{className:"mb-4 flex",children:[e.jsx("img",{className:"rounded-lg",src:r}),e.jsxs("div",{className:"ml-4 text-lg flex flex-col justify-evenly",children:[e.jsx("div",{className:"mb-4 text-3xl",children:o}),e.jsxs("div",{children:[e.jsx("span",{className:"inline-block w-32 font-bold",children:"Nickname"})," ",n]}),e.jsxs("div",{children:[e.jsx("span",{className:"inline-block w-32 font-bold",children:"Capital"})," ",s]}),e.jsxs("div",{children:[e.jsx("span",{className:"inline-block w-32 font-bold",children:"Population"})," ",a.toLocaleString()]})]})]}),e.jsx("div",{className:"leading-relaxed",children:t})]}),Y=({error:s})=>((s===w||!m.isString(s))&&(s="something went wrong."),e.jsxs("div",{className:"m-2 px-4 py-2 bg-rose-200 text-xl rounded-lg shadow-lg",children:["⚠"," ",e.jsx("span",{className:"font-bold text-lg text-neutral-500",children:m.capitalize(s)})]}));async function q(s){const t=`${M}/${s}`;try{return await(await fetch(t)).json()}catch(r){return console.error(`failed to get state data: ${r}`),{error:w}}}const z=()=>{const[s,t]=l.useState(""),[r,o]=l.useState(null),[n,a]=l.useState(null),d=l.useRef(null);async function c(){if(!(m.isString(s)&&s.trim().length))return;let u=await q(s);u.error===void 0?(a(u),t(""),o(null)):o(u.error)}function x(u){s&&c()}function j(u){t(""),d.current.focus()}return l.useEffect(()=>{d.current.focus()}),e.jsxs("div",{className:"my-4 flex flex-col items-center",children:[e.jsxs(v,{className:"mb-4 text-lg flex justify-center",onSubmit:x,children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"search",placeholder:"enter a U.S. state",className:"mr-4 p-2 pr-8 rounded-lg border border-neutral-400",ref:d,onChange:u=>t(u.target.value),value:s}),e.jsx("button",{type:"button",className:"absolute top-2 right-6 opacity-20 hover:opacity-100 focus:opacity-100",onClick:j,children:"❌"})]}),e.jsx("input",{className:"px-4 rounded-lg bg-teal-400 text-teal-800 cursor-pointer",type:"submit",value:"Search"})]}),n&&e.jsx(W,{...n}),r&&e.jsx(Y,{error:r})]})},B=({children:s})=>{let t=0;const r=[e.jsx(f,{collapse:!0,title:"Using Fetch",children:e.jsx(E,{})},t++),e.jsx(f,{collapse:!0,title:"RandomJoke",children:e.jsx(C,{})},t++),e.jsx(f,{collapse:!0,title:"Teammates Project",children:e.jsx($,{})},t++),e.jsx(f,{collapse:!0,title:"Stocks Project",children:e.jsx(L,{})},t++),e.jsx(f,{collapse:!0,title:"Weather Forecast",children:e.jsx(J,{})},t++),e.jsx(f,{collapse:!1,title:"States Project",children:e.jsx(z,{})},t++)];return e.jsxs("div",{className:"h-full flex flex-col justify-start items-strech",children:[e.jsx("h1",{className:"my-4 text-5xl self-center",children:"Fetching Data"}),r]})};export{B as default};
