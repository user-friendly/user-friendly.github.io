import{r,j as e,L as p,u as A,a as M,R as se,b as w,A as te,B as ne}from"./index-D4kk9-OS.js";import{_ as u,t as C,f as H}from"./services-Dx03o7LF.js";const ae="https://user-friendly.dev/learning-api/demos/capstone/",re="browser-mock-api-key",I=async(s,t,n={},a=null)=>{u.isObject(n)||(n={});const l={method:s,credentials:"same-origin",headers:{...n,Authorization:`Bearer ${re}`,"Content-Type":"application/json",Accept:"application/json"}};a&&(l.body=JSON.stringify(a));let o=!1;try{o=await(await fetch(ae+t,l)).json()}catch(i){console.error("failed to get resource",i)}return o},le=(s=!1,t=null)=>({error:s,message:t}),L=s=>{const t=le();return u.isObject(s)?(s.error?(t.error=!0,t.message=s.error):s.message?t.message=s.message:t.message="Success",{...s,...t}):t},oe="Capstone-Session",Y="capstone_session_token",ie=s=>{try{return localStorage.setItem(Y,JSON.stringify(s)),!0}catch(t){console.error(t)}return!1},ce=()=>{try{return JSON.parse(localStorage.getItem(Y))}catch{K()}return!1},K=()=>localStorage.removeItem(Y),de=async s=>{try{const t=JSON.stringify(s),n=await I("GET","plants",{[oe]:t});return L(n)}catch{console.error("Failed to get plants list.")}return!1},ue=async(s,t,n)=>{const a=await I("POST","users",null,{username:s,password:t,password_confirm:n});return L(a)},me=async(s,t)=>{const n=await I("POST","users/session",null,{username:s,password:t}),a=L(n);return u.isString(n.capstone_session_token)&&(a.payload=JSON.parse(n.capstone_session_token)),a},he=async s=>{const t=await I("DELETE","users/session",null,s);return L(t)},b=r.createContext(!1),k=s=>r.useContext(b).isActive()===!s.not?s.children:null,xe=`
	p-2 rounded-lg bg-emerald-100 select-none cursor-pointer
	hover:bg-emerald-200 active:bg-emerald-300 text-emerald-700
`,m=s=>{if(s.name===void 0)return e.jsx(e.Fragment,{});const t=s.name,n=s.className,a=u.omit(u.clone(s),["name","className"]);return e.jsx("span",{className:"material-symbols-outlined "+C(xe,n),...a,children:t})},W=({linkstyle:s})=>e.jsx(k,{children:e.jsx(p,{className:s,to:"/plants",children:"Plant List"})}),Q="py-2 px-1 font-lato font-medium hover:text-emerald-200 active:translate-y-0.5",ge=`${Q} hover:underline`,E=`
	bg-transparent text-white
	hover:bg-emerald-700 group-hover:bg-emerald-700 active:bg-emerald-600 group-active:bg-emerald-600
`,fe=`${E} rounded-full animate-spin`,$=`${Q} relative group flex items-center`,B="px-1 group-hover:underline",je=`${E}`,pe=()=>{const s=A(),t=r.useContext(b),[n,a]=r.useState(!1),l=async o=>{o.stopPropagation(),!n&&(a(!0),await t.signOut()&&s("/"),a(!1))};return e.jsx("div",{className:"hidden sm:flex justify-center bg-emerald-800",children:e.jsxs("div",{className:"w-full max-w-5xl flex p-8 justify-end items-center text-white",children:[e.jsx("div",{className:"flex-1 flex",children:e.jsxs(p,{to:"/",className:"p-2 flex justify-start items-center",children:[e.jsx("img",{className:"w-10",title:"brand logo",src:"https://static-task-assets.react-formula.com/capstone_logo_light.png"}),e.jsx("span",{className:"ml-4 font-playfair text-2xl",children:"Rica's Plants"})]})}),e.jsx(W,{linkstyle:ge}),e.jsxs(k,{children:[e.jsxs(p,{className:$,children:[e.jsx("span",{className:B,children:u.get(t,"data.username")}),e.jsx(m,{name:"account_circle",className:je})]}),e.jsxs(p,{onClick:l,className:$,children:[e.jsx("span",{className:B,children:"Sign Out"}),n&&e.jsx(m,{name:"progress_activity",className:fe})||e.jsx(m,{name:"logout",className:E})]})]}),e.jsx(k,{not:!0,children:e.jsxs(p,{className:$,to:"/sign-in",children:[e.jsx("span",{className:B,children:"Sign In"}),e.jsx(m,{name:"login",className:E})]})})]})})},ye=`
	w-8 h-8 animate-spin rounded-full 
	border-4 border-green-600 border-t-white
`,F=s=>{const t=s.className,n=u.omit(u.clone(s),["name","className","children"]);return e.jsx("div",{...n,className:C(ye,t),children:s.children})},O=`
	my-1 py-2 px-3 bg-emerald-200 rounded-lg
	text-center font-lato font-medium text-emerald-800 hover:text-emerald-300 hover:bg-emerald-600
`,be="self-end bg-emerald-800 text-emerald-200 hover:text-emerald-300 hover:bg-emerald-600",ve="self-end bg-emerald-200 text-emerald-800 hover:text-emerald-300 hover:bg-emerald-600",Se=`w-6 h-6 absolute top-2 right-2.5
	border-transparent border-t-emerald-800 group-hover:border-t-emerald-300
`,Ne=()=>{const s=A(),t=r.useContext(b),n=r.useRef(),[a,l]=r.useState(!1),[o,i]=r.useState(!1),c=h=>{l(o)};r.useEffect(()=>{const h=S=>{n.current&&!n.current.contains(S.target)&&c()};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[o]);const d=a?e.jsx(m,{name:"close",className:ve,onClick:h=>l(o)}):e.jsx(m,{name:"menu",className:be,onClick:h=>l(!0)}),g=async h=>{h.stopPropagation(),!o&&(i(!0),await t.signOut()&&s("/"),i(!1),l(!1))};return e.jsxs("div",{ref:n,className:H("sm:hidden fixed top-2 right-2 w-40 p-2 flex flex-col justify-center",a&&"bg-emerald-800 rounded-lg shadow-lg"),children:[d,e.jsxs("div",{className:"flex flex-col justify-center "+(a?null:"hidden"),onClick:c,children:[e.jsx(p,{className:O,to:"/",children:"Home"}),e.jsx(W,{linkstyle:O}),e.jsx(k,{children:e.jsxs("button",{onClick:g,className:O+"relative group",to:"/sign-out",children:["Sign Out",o&&e.jsx(F,{className:Se})]})}),e.jsx(k,{not:!0,children:e.jsx(p,{className:O,to:"/sign-in",children:"Sign In"})})]})]})},T=()=>e.jsxs(e.Fragment,{children:[e.jsx(Ne,{}),e.jsx(pe,{})]}),we=()=>e.jsxs("div",{className:"h-screen bg-rose-50 flex flex-col",children:[e.jsx(T,{}),e.jsxs("div",{className:"pt-36 flex flex-col justify-center items-center",children:[e.jsxs("h1",{className:"my-3 px-3 text-4xl text-center",children:["Error 404: ",e.jsx("br",{className:"sm:hidden"})," Page Not Found"]}),e.jsx("p",{className:"py-3 px-8 max-w-xl",children:"The page you requested was not found. Please, contact the webadmin if this is a real issue. You might also be a snowflake if you contact the webadmin."})]})]}),ke=!1,R=s=>{const t=r.useContext(b),n=A(),a=s.path!==void 0?s.path:"/",l=s.delay!==void 0?s.delay:ke;return r.useEffect(()=>{if(t.isActive()===!s.not)if(l!==!1){const o=setTimeout(()=>n(a),l);return()=>clearTimeout(o)}else n(a)},[t.data]),s.children},_=r.createContext(0),Ce="my-2",f=s=>{const t=r.useContext(_);return e.jsx(_.Provider,{value:t+1,children:e.jsx("div",{className:C(Ce,s.className),children:s.children})})},J=["","ml-2","ml-6","ml-10","ml-14","ml-20"],X=()=>{const s=r.useContext(_);return s<7?J[s-1]:J[5]},Oe="my-2",x=s=>{const t=X();return e.jsx("p",{className:C(Oe,t,s.className),children:s.children})},Ee=["text-6xl","text-5xl","text-4xl","text-3xl","text-2xl","text-xl"],_e="text-xl font-playfair",Ae=s=>{switch(s.level){case 0:case 1:return e.jsx("h1",{...s,children:s.children});case 2:return e.jsx("h2",{...s,children:s.children});case 3:return e.jsx("h3",{...s,children:s.children});case 4:return e.jsx("h4",{...s,children:s.children});case 5:return e.jsx("h5",{...s,children:s.children});case 6:default:return e.jsx("h6",{...s,children:s.children})}return e.jsx("div",{...s,children:s.children})},j=s=>{const t=r.useContext(_),n=X();return e.jsx(Ae,{level:t,className:C(_e,n,Ee[t-1],s.className),children:s.children})},Ie=()=>e.jsxs(R,{not:!0,path:"/sign-in",children:[e.jsx(T,{}),e.jsxs(f,{className:"p-8 mx-auto w-full max-w-5xl",children:[e.jsx(j,{className:"p-2 text-center",children:"Welcome to Rica's Plants"}),e.jsx(x,{children:"Welcome to Verdant Vistas, your one-stop destination for all things green and growing! Our passion for plants shines through in our diverse selection of lush houseplants, exotic succulents, and vibrant garden favorites. We believe that plants bring more than just beauty to a space; they breathe life into your home, purify your air, and uplift your spirit. Whether you’re a seasoned green thumb or a first-time plant parent, we’re here to help you cultivate the perfect indoor oasis."}),e.jsx(x,{children:"At Verdant Vistas, we understand that every plant has its own personality and needs. That's why we offer detailed care guides, personalized recommendations, and friendly support to ensure your plants thrive. From bright, sun-loving cacti to delicate, shade-loving ferns, we have options to suit every environment and lifestyle. Our commitment to quality means that each plant is carefully selected and nurtured until it's ready to become part of your space."}),e.jsx(x,{children:"Discover the joy of nurturing your own slice of nature with our specially curated collections. Our selection changes with the seasons, allowing you to find the freshest additions to your plant family throughout the year. Explore our rare finds section for unique specimens that will make your collection truly stand out. Join our community of plant lovers and embark on a journey of growth, inspiration, and endless greenery."})]})]}),y=`
	The quick brown fox jumps over the lazy dog, darting swiftly across the field with grace.
	As it leaps, its sleek fur glistens under the afternoon sun, casting fleeting shadows on the
	ground. The dog, unmoved by the fox's antics, lies lazily on the grass, its eyes half-closed
	in contentment. Around them, the sounds of nature fill the air: the chirping of birds,
	the rustling of leaves, and the distant hum of a breeze that stirs the tall grass. Time seems
	to slow in this peaceful moment, where the simple beauty of the scene speaks louder than words.
`,Le=()=>e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsxs("div",{className:"p-6 m-auto max-w-5xl ",children:[e.jsx("h1",{className:"my-4 text-5xl",children:"Heading"}),e.jsx("div",{className:"my-4 text-xl font-playfair",children:"Font Playfair Display test. This here is some random text to test the given font."}),e.jsx("div",{className:"my-4 text-xl font-lato",children:"Font Lato test. This here is some random text to test the given font."}),e.jsxs("div",{children:[e.jsx("h2",{className:"my-4 text-4xl",children:"Icons"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(m,{name:"menu"}),e.jsx(m,{name:"home",className:"text-4xl"}),e.jsx(m,{name:"account_circle"}),e.jsx(m,{name:"login"}),e.jsx(m,{name:"progress_activity",className:"rounded-full bg-transparent text-amber-700 hover:bg-amber-200 active:bg-amber-300 animate-spin"}),e.jsx(m,{name:"logout"}),e.jsx(m,{name:"close",className:"bg-violet-100 text-violet-700 hover:bg-violet-200 active:bg-violet-300"})]})]})]}),e.jsxs(f,{className:"my-20",children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y}),e.jsxs(f,{children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y}),e.jsxs(f,{children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y}),e.jsxs(f,{children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y}),e.jsxs(f,{children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y}),e.jsxs(f,{children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y}),e.jsxs(f,{children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y}),e.jsxs(f,{children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y})]})]})]})]})]})]})]})]}),e.jsxs(f,{className:"my-20",children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y}),e.jsxs(f,{children:[e.jsx(j,{children:"Sub heading"}),e.jsx(x,{children:y})]})]})]}),D={text:"p-1 px-2 rounded-lg border border-slate-300 text-slate-600 bg-slate-50 focus:outline-emerald-600",button:"py-2 cursor-pointer rounded-lg text-white bg-green-800 hover:bg-green-700 active:bg-green-600",submit:"py-2 cursor-pointer rounded-lg text-white bg-green-800 hover:bg-green-700 active:bg-green-600"},U={text:"ml-3 mb-2 -mt-2 text-slate-400",button:"hidden"},Fe=({name:s,value:t,type:n="text",label:a,placeholder:l="",onChange:o,isButton:i=!1,onClick:c})=>{const d=r.useId(),g=D[n]!==void 0?D[n]:D.text,h=U[n]!==void 0?U[n]:U.text;return e.jsxs("div",{className:"my-3 flex flex-col",children:[a&&e.jsx("label",{className:h,htmlFor:d,children:a}),i?e.jsx("button",{className:g,type:n,name:s,id:d,onClick:c,children:t}):e.jsx("input",{className:g,type:n,name:s,id:d,placeholder:l,value:t,onChange:o})]})},Te=`
	m-4 pt-2 pb-4 px-8 bg-white border rounded-lg border-slate-300 font-lato font-medium
	min-w-80 flex flex-col 
`,Re=s=>{for(const t of s)if(t.name===void 0)throw"Form fields MUST have names."},Pe=s=>{const t={};for(const n of s)t[n.name]=n.value!==void 0?n.value:"";return t},$e=(s,t,n)=>({...s,[t]:n}),Z=s=>{Re(s.fields);const t=r.useId(),[n,a]=r.useState(()=>Pe(s.fields)),l=i=>{i.preventDefault(),s.onSubmit(n,t,i)},o=u.assign(u.omit(s,["fields"]),{className:Te,name:`form-${t}`,method:"POST",action:"",onSubmit:l});return e.jsxs("form",{...o,children:[s.fields.map((i,c)=>e.jsx(Fe,{onChange:d=>a($e(n,i.name,d.target.value)),...i,value:i.isButton?i.value:n[i.name]},c)),o.children]})},ee=s=>{const t=s.children,n=s.status?s.status:{error:!1,message:null};return n.error!==!1&&!n.message&&(n.message="Something went wrong - try again later"),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative hidden md:block",children:[e.jsx("img",{className:"h-screen object-cover",title:"plants on a rack",src:"https://static-task-assets.react-formula.com/capstone_sign_in_scene.png"}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-black/10"}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-emerald-800/40"})]}),e.jsxs("div",{className:"h-screen flex-1 bg-emerald-50 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center mx-2 my-8",children:[e.jsx("img",{className:"w-16 mb-2 ",title:"brand logo",src:"https://static-task-assets.react-formula.com/capstone_logo_dark.png"}),e.jsx("div",{className:"font-playfair text-emerald-700 text-2xl",children:"Rica's Plants"})]}),n.message?e.jsx("div",{className:H("animate-slideDown py-1 px-2 rounded-lg border",n.error?"bg-red-100 border-red-600 text-red-600 font-medium":"text-emerald-800 bg-emerald-100 border-emerald-600"),children:n.message}):null,t]})]})},Be=1500,q=()=>({error:!1,message:null}),De=()=>{const s=r.useContext(b),t=M(),[n,a]=r.useState(!1),[l,o]=r.useState(!1),[i,c]=r.useState(()=>u.has(t,"state.status.message")?t.state.status:q()),d=async(S,v,P)=>{if(l||s.isActive())return;console.log(`Sing up form {${v}} submitted.`),console.log("Values:",S),o(!0),c(q());const N=await me(S.username,S.password);N.error===!1&&u.isObject(N.payload)&&(console.log("Login successful. Login details:",N.payload),s.signIn(N.payload),a(Be)),c({error:N.error,message:N.message}),o(!1)},g=e.jsx("span",{className:"flex justify-center",children:e.jsxs("span",{className:"relative",children:["Sign In ",l?e.jsx(F,{className:"absolute top-0 -right-8 ml-2 w-6 h-6 border-transparent border-t-white"}):null]})}),h=[{name:"username",label:"username",value:u.has(t,"state.username")?t.state.username:void 0,type:"text"},{name:"password",label:"password",type:"password"},{name:"submit_button",value:g,type:"submit",isButton:!0}];return e.jsx(R,{path:"/plants",delay:n,children:e.jsxs(ee,{status:i,children:[e.jsx(Z,{onSubmit:d,fields:h}),e.jsx(p,{to:"/sign-up",className:"text-sm text-green-700 underline hover:text-green-500",children:"Create an Account"})]})})},z=()=>({error:!1,message:null}),Ue=()=>{const s=r.useContext(b),t=A(),[n,a]=r.useState(!1),[l,o]=r.useState(()=>z()),i=async(g,h,S)=>{if(n||s.isActive())return;console.log(`Sing up form {${h}} submitted.`),console.log("Values:",g),a(!0),o(z());const v=await ue(g.username,g.password,g.password_confirm);if(v.error===!1){const P=u.clone(v);P.message="You can login with Your username & password",v.message=e.jsxs(e.Fragment,{children:[v.message,e.jsx("br",{}),"Redirecting You to Sing In page..."]}),setTimeout(()=>t("/sign-in",{state:{status:P,username:g.username}}),1500)}o(v),a(!1)},d=[{label:"username",name:"username",type:"text"},{label:"password",name:"password",type:"password"},{label:"confirm password",name:"password_confirm",type:"password"},{name:"submit_button",value:e.jsx("span",{className:"flex justify-center",children:e.jsxs("span",{className:"relative",children:["Create an Account ",n?e.jsx(F,{className:"absolute top-0 -right-8 ml-2 w-6 h-6 border-transparent border-t-white"}):null]})}),type:"submit",isButton:!0}];return e.jsx(R,{path:"/plants",children:e.jsxs(ee,{status:l,children:[e.jsx(Z,{onSubmit:i,fields:d}),e.jsx(p,{to:"/sign-in",className:"text-sm text-green-700 underline hover:text-green-500",children:"Log into Account"})]})})},Ve=()=>{const s=r.useContext(b),[t,n]=r.useState(null),[a,l]=r.useState({error:!1}),o=async()=>{n(null);const c=await de(s==null?void 0:s.data);c.error===!1?n(c.data):console.error("Failed to get plants list. Response:",c),l(c)};r.useEffect(()=>{o()},[s.data]);const i=c=>{const{data:d}=c;return e.jsxs("div",{className:"my-4 p-3 border rounded-lg",children:[e.jsx("div",{children:d.name}),e.jsx("img",{className:"my-4 max-w-48 object-cover rounded-md",alt:d.description,src:d.image}),e.jsx("div",{children:d.description})]})};return e.jsxs(R,{not:!0,path:"/sign-in",children:[e.jsx(T,{}),e.jsxs("div",{className:"py-12 flex flex-col justify-center items-center",children:[(a==null?void 0:a.error)!==!1&&e.jsx("div",{className:"mb-8 px-2 py-1 bg-rose-100 border border-rose-300 rounded-lg text-red-600 font-medium",children:a.message}),e.jsxs("div",{children:[t&&t.map((c,d)=>e.jsx(i,{data:c},d))||(a==null?void 0:a.error)===!1&&e.jsx(F,{}),e.jsx("br",{}),e.jsx("button",{onClick:o,className:"px-2 py-1 border rounded-md bg-emerald-50",children:"Refresh"})]})]})]})},He=()=>(M(),e.jsxs(se,{children:[e.jsx(w,{path:"/",element:e.jsx(Ie,{})}),e.jsx(w,{path:"/sign-in",element:e.jsx(De,{})}),e.jsx(w,{path:"/sign-up",element:e.jsx(Ue,{})}),e.jsx(w,{path:"/style-guide",element:e.jsx(Le,{})}),e.jsx(w,{path:"/plants",element:e.jsx(Ve,{})}),e.jsx(w,{path:"*",element:e.jsx(we,{})})]})),V=`
	my-1 py-2 px-3 bg-sky-200 rounded-lg
	text-center font-lato font-medium text-sky-800 hover:text-sky-300 hover:bg-sky-600
`,G="self-end bg-sky-200 text-sky-800 hover:text-sky-300 hover:bg-sky-600",Ye=()=>{const s=r.useRef(),[t,n]=r.useState(!1);r.useEffect(()=>{const l=o=>{s.current&&!s.current.contains(o.target)&&n(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const a=t?e.jsx(m,{name:"close",className:G,onClick:l=>n(!1)}):e.jsx(m,{name:"menu",className:G,onClick:l=>n(!0)});return e.jsxs("div",{ref:s,className:H("fixed bottom-2 right-2 w-40 p-2 flex flex-col-reverse justify-center",t&&"bg-sky-100 rounded-lg shadow-lg"),children:[a,e.jsxs("div",{className:"flex flex-col justify-center "+(t?null:"hidden"),onClick:()=>n(!1),children:[e.jsx(te,{className:V,appid:"default",children:"Main App"}),e.jsx(p,{className:V,to:"/style-guide",children:"Style Guide"}),e.jsx(p,{className:V,to:"/",children:"Rica's Plants"})]})]})},Je="font-lato text-emerald-600",Ge=()=>{const[s,t]=r.useState(()=>ce()),n={data:s,isActive:()=>u.isObject(s),signIn:a=>{t(a),ie(a)},signOut:async()=>{let a=!1;return u.isObject(s)?(console.log(`Sign out user {${s.username}}.`),a=await he(s)):console.log("No user was signed in."),t(null),K(),a}};return e.jsx(b.Provider,{value:n,children:e.jsxs(ne,{children:[e.jsx("div",{className:`${Je}`,children:e.jsx(He,{})}),e.jsx(Ye,{})]})})};export{Ge as default};
