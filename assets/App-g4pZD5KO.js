import{j as e,r as d,L as h,u as B,R as C,a as g,A as R,B as P}from"./index-CM_guu_I.js";import{_ as x,t as k,f as F}from"./services-Dx03o7LF.js";const T=()=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Error 404: Page Not Found."}),e.jsx("p",{children:"The page you requested was not found. Please, contact the webadmin if this is a real issue. You might also be a snowflake if you contact the webadmin."})]}),E=`
	p-2 rounded-lg bg-green-100 select-none cursor-pointer
	hover:bg-green-200 text-green-700
`,f=t=>{if(t.name===void 0)return e.jsx(e.Fragment,{});const n=t.name,s=t.className,a=x.omit(x.clone(t),["name","className"]);return e.jsx("span",{className:"material-symbols-outlined "+k(E,s),...a,children:n})},$="https://user-friendly.dev/learning-api/demos/capstone/",D="browser-mock-api-key",A=async(t,n,s=null)=>{const a={method:t,credentials:"same-origin",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}};s&&(a.body=JSON.stringify(s));let r=!1;try{r=await(await fetch($+n,a)).json()}catch(i){console.error("failed to get resource",i)}return r},j={text:"p-1 px-2 rounded-lg border border-slate-300 text-slate-600 bg-slate-50 focus:outline-emerald-600",button:"py-2 cursor-pointer rounded-lg text-white bg-green-800 hover:bg-green-700 active:bg-green-600",submit:"py-2 cursor-pointer rounded-lg text-white bg-green-800 hover:bg-green-700 active:bg-green-600"},v={text:"ml-3 mb-2 -mt-2 text-slate-400",button:"hidden"},O=({name:t,value:n,type:s="text",label:a,placeholder:r="",onChange:i,isButton:l=!1,onClick:o})=>{const u=d.useId(),p=j[s]!==void 0?j[s]:j.text,c=v[s]!==void 0?v[s]:v.text;return e.jsxs("div",{className:"my-3 flex flex-col",children:[a&&e.jsx("label",{className:c,htmlFor:u,children:a}),l?e.jsx("button",{className:p,type:s,name:t,id:u,onClick:o,children:n}):e.jsx("input",{className:p,type:s,name:t,id:u,placeholder:r,value:n,onChange:i})]})},V=`
	m-4 pt-2 pb-4 px-8 bg-white border rounded-lg border-slate-300 font-lato font-medium
	min-w-80 flex flex-col 
`,M=t=>{for(const n of t)if(n.name===void 0)throw"Form fields MUST have names."},U=t=>{const n={};for(const s of t)n[s.name]=s.value!==void 0?s.value:"";return n},G=(t,n,s)=>({...t,[n]:s}),I=t=>{M(t.fields);const n=d.useId(),[s,a]=d.useState(()=>U(t.fields)),r=l=>{l.preventDefault(),t.onSubmit(s,n,l)},i=x.assign(x.omit(t,["fields"]),{className:V,name:`form-${n}`,method:"POST",action:"",onSubmit:r});return e.jsxs("form",{...i,children:[t.fields.map((l,o)=>e.jsx(O,{onChange:u=>a(G(s,l.name,u.target.value)),...l,value:l.isButton?l.value:s[l.name]},o)),i.children]})},_=t=>{const n=t.children,s=t.status?t.status:{error:!1,message:null};return s.error!==!1&&!s.message&&(s.message="Something went wrong - try again later"),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative hidden md:block",children:[e.jsx("img",{className:"h-screen object-cover",title:"plants on a rack",src:"https://static-task-assets.react-formula.com/capstone_sign_in_scene.png"}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-black/10"}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-green-800/40"})]}),e.jsxs("div",{className:"h-screen flex-1 bg-green-50 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center mx-2 my-8",children:[e.jsx("img",{className:"w-16 mb-2 ",title:"brand logo",src:"https://static-task-assets.react-formula.com/capstone_logo_dark.png"}),e.jsx("div",{className:"font-playfair text-emerald-700 text-2xl",children:"Rica's Plants"})]}),s.message?e.jsx("div",{className:F("animate-slideDown py-1 px-2 rounded-lg border bg-white",s.error?"border-red-600 text-red-600 font-medium":"border-green-600"),children:s.message}):null,n]})]})},Y=`
	w-8 h-8 animate-spin rounded-full 
	border-4 border-green-600 border-t-white
`,L=t=>{const n=t.className,s=x.omit(x.clone(t),["name","className","children"]);return e.jsx("div",{...s,className:k(Y,n),children:t.children})},y=()=>({error:!1,message:null}),q=()=>{const[t,n]=d.useState(!1),[s,a]=d.useState(()=>y()),r=async(o,u,p)=>{console.log(`Sing up form {${u}} submitted.`),console.log("Values:",o),a(y()),n(!0);const c=await A("POST","users",{username:o.username,password:o.password,password_confirm:o.password_confirm}),m=y();c.error?(m.error=!0,m.message=c.error):c.message?m.message=c.message:m.message="Sign up successful",a(m),n(!1)},l=[{label:"username",name:"username",type:"text"},{label:"password",name:"password",type:"password"},{label:"confirm password",name:"password_confirm",type:"password"},{name:"submit_button",value:e.jsx("span",{className:"flex justify-center",children:e.jsxs("span",{className:"relative",children:["Create an Account ",t?e.jsx(L,{className:"absolute top-0 -right-8 ml-2 w-6 h-6 border-transparent border-t-white"}):null]})}),type:"submit",isButton:!0}];return e.jsxs(_,{status:s,children:[e.jsx(I,{onSubmit:r,fields:l}),e.jsx(h,{to:"/sing-in",className:"text-sm text-green-700 underline hover:text-green-500",children:"Log into Account"})]})},w=()=>({error:!1,message:null}),N=()=>{const[t,n]=d.useState(!1),[s,a]=d.useState(()=>w()),r=async(o,u,p)=>{console.log(`Sing up form {${u}} submitted.`),console.log("Values:",o),a(w()),n(!0);const c=await A("POST","users/session",{username:o.username,password:o.password}),m=w();c.error?(m.error=!0,m.message=c.error):c.message?m.message=c.message:m.message="Sign in successful",a(m),n(!1)},l=[{name:"username",label:"username",type:"text"},{name:"password",label:"password",type:"password"},{name:"submit_button",value:e.jsx("span",{className:"flex justify-center",children:e.jsxs("span",{className:"relative",children:["Sign In ",t?e.jsx(L,{className:"absolute top-0 -right-8 ml-2 w-6 h-6 border-transparent border-t-white"}):null]})}),type:"submit",isButton:!0}];return e.jsxs(_,{status:s,children:[e.jsx(I,{onSubmit:r,fields:l}),e.jsx(h,{to:"/sing-up",className:"text-sm text-green-700 underline hover:text-green-500",children:"Create an Account"})]})},z=()=>e.jsxs("div",{className:"p-6 max-w-lg m-auto",children:[e.jsx("h1",{className:"my-4 text-5xl",children:"Heading"}),e.jsx("div",{className:"my-4 text-xl font-playfair",children:"Font Playfair Display test. This here is some random text to test the given font."}),e.jsx("div",{className:"my-4 text-xl font-lato",children:"Font Lato test. This here is some random text to test the given font."}),e.jsxs("div",{children:[e.jsx("h2",{className:"my-4 text-4xl",children:"Icons"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{name:"menu"}),e.jsx(f,{name:"home",className:"text-4xl"}),e.jsx(f,{name:"close",className:"bg-violet-100 text-violet-700 hover:bg-violet-200"})]})]})]}),H=()=>(B(),e.jsxs(C,{children:[e.jsx(g,{path:"/sing-in",element:e.jsx(N,{})}),e.jsx(g,{path:"/sing-up",element:e.jsx(q,{})}),e.jsx(g,{path:"/",element:e.jsx(N,{})}),e.jsx(g,{path:"/style-guide",element:e.jsx(z,{})}),e.jsx(g,{path:"*",element:e.jsx(T,{})})]})),b=`
	my-1 py-2 px-3 bg-sky-200 rounded-lg
	text-center font-lato font-medium text-sky-800 hover:text-sky-300 hover:bg-sky-600
`,S="self-end bg-sky-200 text-sky-800 hover:text-sky-300 hover:bg-sky-600",J=()=>{const[t,n]=d.useState(!1),s=d.useRef();d.useEffect(()=>{const r=i=>{s.current&&!s.current.contains(i.target)&&n(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const a=t?e.jsx(f,{name:"close",className:S,onClick:r=>n(!1)}):e.jsx(f,{name:"menu",className:S,onClick:r=>n(!0)});return e.jsxs("div",{ref:s,className:F("fixed top-2 right-2 w-40 p-2 flex flex-col justify-center",t&&"bg-sky-100 rounded-lg shadow-lg"),children:[a,e.jsxs("div",{className:"flex flex-col justify-center "+(t?null:"hidden"),onClick:r=>n(!1),children:[e.jsx(R,{className:b,appid:"default",children:"Main App"}),e.jsx(h,{className:b,to:"/",children:"Rica's Plants"}),e.jsx(h,{className:b,to:"/style-guide",children:"Style Guide"}),e.jsx(h,{className:b,to:"/sing-in",children:"Sign In"})]})]})},K="text-green-600",X=()=>e.jsxs(P,{children:[e.jsx("div",{className:`${K}`,children:e.jsx(H,{})}),e.jsx(J,{})]});export{X as default};
